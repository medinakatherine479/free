!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["route-widget-shopify"]=t():e["route-widget-shopify"]=t()}(self,(function(){return(()=>{var e,t,r={6262:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=function(e){"use strict";var t,r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),a=new A(n||[]);return i._invoke=function(e,t,r){var n=d;return function(o,i){if(n===h)throw new Error("Generator is already running");if(n===m){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=R(a,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var s=p(e,t,r);if("normal"===s.type){if(n=r.done?m:f,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=m,r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d="suspendedStart",f="suspendedYield",h="executing",m="completed",v={};function g(){}function y(){}function b(){}var w={};u(w,a,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(O([])));k&&k!==r&&o.call(k,a)&&(w=k);var x=b.prototype=g.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(i,a,c,s){var u=p(e[i],e,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"===n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(d).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;this._invoke=function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}}function R(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,R(e,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=p(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function O(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function r(){for(;++n<e.length;)if(o.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:T}}function T(){return{value:t,done:!0}}return y.prototype=b,u(x,"constructor",b),u(b,"constructor",y),y.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},S(C.prototype),u(C.prototype,c,(function(){return this})),e.AsyncIterator=C,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new C(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(x),u(x,s,"Generator"),u(x,a,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}("object"===n(e=r.nmd(e))?e.exports:{});try{regeneratorRuntime=o}catch(e){"object"===("undefined"==typeof globalThis?"undefined":n(globalThis))?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}},8129:(e,t,r)=>{e.exports=r(6262)},1806:(e,t,r)=>{e.exports=r(5642)},1107:(e,t,r)=>{"use strict";var n=r(7320),o=r(1135),i=r(4448),a=r(5610),c=r(6028),s=r(9077),u=r(1734),l=r(2226),p=r(1285),d=r(5007);e.exports=function(e){return new Promise((function(t,r){var f,h=e.data,m=e.headers,v=e.responseType;function g(){e.cancelToken&&e.cancelToken.unsubscribe(f),e.signal&&e.signal.removeEventListener("abort",f)}n.isFormData(h)&&delete m["Content-Type"];var y=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(b+":"+w)}var _=c(e.baseURL,e.url);function k(){if(y){var n="getAllResponseHeaders"in y?s(y.getAllResponseHeaders()):null,i={data:v&&"text"!==v&&"json"!==v?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:n,config:e,request:y};o((function(e){t(e),g()}),(function(e){r(e),g()}),i),y=null}}if(y.open(e.method.toUpperCase(),a(_,e.params,e.paramsSerializer),!0),y.timeout=e.timeout,"onloadend"in y?y.onloadend=k:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(k)},y.onabort=function(){y&&(r(l("Request aborted",e,"ECONNABORTED",y)),y=null)},y.onerror=function(){r(l("Network Error",e,null,y)),y=null},y.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||p.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(l(t,e,n.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",y)),y=null},n.isStandardBrowserEnv()){var x=(e.withCredentials||u(_))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;x&&(m[e.xsrfHeaderName]=x)}"setRequestHeader"in y&&n.forEach(m,(function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete m[t]:y.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),v&&"json"!==v&&(y.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&y.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(f=function(e){y&&(r(!e||e&&e.type?new d("canceled"):e),y.abort(),y=null)},e.cancelToken&&e.cancelToken.subscribe(f),e.signal&&(e.signal.aborted?f():e.signal.addEventListener("abort",f))),h||(h=null),y.send(h)}))}},5642:(e,t,r)=>{"use strict";var n=r(7320),o=r(9692),i=r(9108),a=r(6163),c=function e(t){var r=new i(t),c=o(i.prototype.request,r);return n.extend(c,i.prototype,r),n.extend(c,r),c.create=function(r){return e(a(t,r))},c}(r(1285));c.Axios=i,c.Cancel=r(5007),c.CancelToken=r(6476),c.isCancel=r(8448),c.VERSION=r(2037).version,c.all=function(e){return Promise.all(e)},c.spread=r(5166),c.isAxiosError=r(5099),e.exports=c,e.exports.default=c},5007:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},6476:(e,t,r)=>{"use strict";var n=r(5007);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;this.promise.then((function(e){if(r._listeners){var t,n=r._listeners.length;for(t=0;t<n;t++)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},o.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},8448:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},9108:(e,t,r)=>{"use strict";var n=r(7320),o=r(5610),i=r(3060),a=r(2756),c=r(6163),s=r(7375),u=s.validators;function l(e){this.defaults=e,this.interceptors={request:new i,response:new i}}l.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=c(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;void 0!==r&&s.assertOptions(r,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var n=[],o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));var i,l=[];if(this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)})),!o){var p=[a,void 0];for(Array.prototype.unshift.apply(p,n),p=p.concat(l),i=Promise.resolve(t);p.length;)i=i.then(p.shift(),p.shift());return i}for(var d=t;n.length;){var f=n.shift(),h=n.shift();try{d=f(d)}catch(e){h(e);break}}try{i=a(d)}catch(e){return Promise.reject(e)}for(;l.length;)i=i.then(l.shift(),l.shift());return i},l.prototype.getUri=function(e){return e=c(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,r){return this.request(c(r||{},{method:e,url:t,data:(r||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,r,n){return this.request(c(n||{},{method:e,url:t,data:r}))}})),e.exports=l},3060:(e,t,r)=>{"use strict";var n=r(7320);function o(){this.handlers=[]}o.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},6028:(e,t,r)=>{"use strict";var n=r(6900),o=r(6787);e.exports=function(e,t){return e&&!n(t)?o(e,t):t}},2226:(e,t,r)=>{"use strict";var n=r(3669);e.exports=function(e,t,r,o,i){var a=new Error(e);return n(a,t,r,o,i)}},2756:(e,t,r)=>{"use strict";var n=r(7320),o=r(4725),i=r(8448),a=r(1285),c=r(5007);function s(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new c("canceled")}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=o.call(e,e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=o.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(s(e),t&&t.response&&(t.response.data=o.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},3669:e=>{"use strict";e.exports=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},6163:(e,t,r)=>{"use strict";var n=r(7320);e.exports=function(e,t){t=t||{};var r={};function o(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function i(r){return n.isUndefined(t[r])?n.isUndefined(e[r])?void 0:o(void 0,e[r]):o(e[r],t[r])}function a(e){if(!n.isUndefined(t[e]))return o(void 0,t[e])}function c(r){return n.isUndefined(t[r])?n.isUndefined(e[r])?void 0:o(void 0,e[r]):o(void 0,t[r])}function s(r){return r in t?o(e[r],t[r]):r in e?o(void 0,e[r]):void 0}var u={url:a,method:a,data:a,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:s};return n.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||i,o=t(e);n.isUndefined(o)&&t!==s||(r[e]=o)})),r}},1135:(e,t,r)=>{"use strict";var n=r(2226);e.exports=function(e,t,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},4725:(e,t,r)=>{"use strict";var n=r(7320),o=r(1285);e.exports=function(e,t,r){var i=this||o;return n.forEach(r,(function(r){e=r.call(i,e,t)})),e}},1285:(e,t,r)=>{"use strict";var n=r(7320),o=r(4554),i=r(3669),a={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(s=r(1107)),s),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)||t&&"application/json"===t["Content-Type"]?(c(t,"application/json"),function(e,t,r){if(n.isString(e))try{return(0,JSON.parse)(e),n.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||u.transitional,r=t&&t.silentJSONParsing,o=t&&t.forcedJSONParsing,a=!r&&"json"===this.responseType;if(a||o&&n.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(a){if("SyntaxError"===e.name)throw i(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){u.headers[e]=n.merge(a)})),e.exports=u},2037:e=>{e.exports={version:"0.26.0"}},9692:e=>{"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},5610:(e,t,r)=>{"use strict";var n=r(7320);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var i;if(r)i=r(t);else if(n.isURLSearchParams(t))i=t.toString();else{var a=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),a.push(o(t)+"="+o(e))})))})),i=a.join("&")}if(i){var c=e.indexOf("#");-1!==c&&(e=e.slice(0,c)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},6787:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4448:(e,t,r)=>{"use strict";var n=r(7320);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,o,i,a){var c=[];c.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&c.push("expires="+new Date(r).toGMTString()),n.isString(o)&&c.push("path="+o),n.isString(i)&&c.push("domain="+i),!0===a&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},6900:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},5099:(e,t,r)=>{"use strict";var n=r(7320);e.exports=function(e){return n.isObject(e)&&!0===e.isAxiosError}},1734:(e,t,r)=>{"use strict";var n=r(7320);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=o(window.location.href),function(t){var r=n.isString(t)?o(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},4554:(e,t,r)=>{"use strict";var n=r(7320);e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},9077:(e,t,r)=>{"use strict";var n=r(7320),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,i,a={};return e?(n.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=n.trim(e.substr(0,i)).toLowerCase(),r=n.trim(e.substr(i+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([r]):a[t]?a[t]+", "+r:r}})),a):a}},5166:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},7375:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=r(2037).version,i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(r){return n(r)===e||"a"+(t<1?"n ":" ")+e}}));var a={};i.transitional=function(e,t,r){function n(e,t){return"[Axios v"+o+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,o,i){if(!1===e)throw new Error(n(o," has been removed"+(t?" in "+t:"")));return t&&!a[o]&&(a[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,o,i)}},e.exports={assertOptions:function(e,t,r){if("object"!==n(e))throw new TypeError("options must be an object");for(var o=Object.keys(e),i=o.length;i-- >0;){var a=o[i],c=t[a];if(c){var s=e[a],u=void 0===s||c(s,a,e);if(!0!==u)throw new TypeError("option "+a+" must be "+u)}else if(!0!==r)throw Error("Unknown option "+a)}},validators:i}},7320:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=r(9692),i=Object.prototype.toString;function a(e){return Array.isArray(e)}function c(e){return void 0===e}function s(e){return"[object ArrayBuffer]"===i.call(e)}function u(e){return null!==e&&"object"===n(e)}function l(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function p(e){return"[object Function]"===i.call(e)}function d(e,t){if(null!=e)if("object"!==n(e)&&(e=[e]),a(e))for(var r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:a,isArrayBuffer:s,isBuffer:function(e){return null!==e&&!c(e)&&null!==e.constructor&&!c(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===i.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&s(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:u,isPlainObject:l,isUndefined:c,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:p,isStream:function(e){return u(e)&&p(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===i.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:d,merge:function e(){var t={};function r(r,n){l(t[n])&&l(r)?t[n]=e(t[n],r):l(r)?t[n]=e({},r):a(r)?t[n]=r.slice():t[n]=r}for(var n=0,o=arguments.length;n<o;n++)d(arguments[n],r);return t},extend:function(e,t,r){return d(t,(function(t,n){e[n]=r&&"function"==typeof t?o(t,r):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},3201:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r,n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var i=(r=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),a=o.sources.map((function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"}));return[n].concat(a).concat([i]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r})).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(n[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),t.push(a))}},t}},9428:(e,t,r)=>{"use strict";var n=r(2134);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,r,o,i,a){if(a!==n){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return r.PropTypes=r,r}},6526:(e,t,r)=>{e.exports=r(9428)()},2134:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},6208:e=>{e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:n+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},4418:(e,t,r)=>{var n=r(4147).version;e.exports=["shopify-widget@".concat(n,"-dev"),"shopify-widget@".concat(n,"-test"),{baseImageURL:"https://cdn.routeapp.io/route-widget/images",apiURL:"https://api.route.com",headlessApiURL:"https://shopify.route.com",shopifyServiceURL:"https://shopify.route.com",protectCoreURL:"https://protection-widget.route.com/protect.core.js",sentryRelease:"shopify-widget@".concat(n),sentryAuthToken:"23f18296e29a4ded9de739ced27f6106f9ae8433a1e34a6db1b6a19a15c28a49",sentryDSN:"https://a00750699f944d129eba8432ebb32b2d@o239602.ingest.sentry.io/6004108"},"shopify-widget@".concat(n)][2]},1038:()=>{var e=e||{};e.analytics={init:function(){var t=this;window.setTimeout((function(){t.settings.disableGA||e.analytics.render()}),1e3)},render:function(){if(!document.getElementById("js-routeapp-analytics-frame")){var e=document.createElement("iframe");e.id="js-routeapp-analytics-frame",e.title="Route App Analytics",e.frameBorder=0,e.width=0,e.height=0,e.setAttribute("src",this.settings.url),e.style="width:0; height:0; border: 0; border: none; display: block !important",document.body.appendChild(e)}},send:function(e){var t=document.getElementById("js-routeapp-analytics-frame");t&&t.contentWindow.postMessage(e,this.settings.url)},settings:{disableGA:!1,url:"https://cdn.routeapp.io/route-analytics/index.html"}};var t=setInterval((function(){"complete"!==document.readyState&&"interactive"!==document.readyState||(e.analytics.init(),clearInterval(t))}),500);window.Routeapp=e},2604:e=>{e.exports.c=function(e){return"function"==typeof window.olOnReadyStateChangeReplacement&&(e+="&internal"),e}},7106:e=>{e.exports.T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"USD",o=new Intl.NumberFormat(t,{style:"currency",currency:n,minimumFractionDigits:e?2:0,maximumFractionDigits:e?2:0});return o.format(r)},e.exports.c=["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRU","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STN","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UYW","UZS","VES","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"]},7405:(e,t,r)=>{(e.exports=r(3201)(!1)).push([e.id,".order-summary__sections.route-loading::after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(255,255,255,0.75);z-index:999;background-image:url(https://cdn.routeapp.io/route-widget-shopify/v2/images/loading.gif);background-repeat:no-repeat;background-position:center center}\n",""])},400:(e,t,r)=>{var n=r(7405);"string"==typeof n&&(n=[[e.id,n,""]]);r(6723)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},6723:(e,t,r)=>{var n,o,i={},a=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=n.apply(this,arguments)),o}),c=function(e,t){return t?t.querySelector(e):document.querySelector(e)},s=function(e){var t={};return function(e,r){if("function"==typeof e)return e();if(void 0===t[e]){var n=c.call(this,e,r);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),u=null,l=0,p=[],d=r(6208);function f(e,t){for(var r=0;r<e.length;r++){var n=e[r],o=i[n.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](n.parts[a]);for(;a<n.parts.length;a++)o.parts.push(b(n.parts[a],t))}else{var c=[];for(a=0;a<n.parts.length;a++)c.push(b(n.parts[a],t));i[n.id]={id:n.id,refs:1,parts:c}}}}function h(e,t){for(var r=[],n={},o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],c={css:i[1],media:i[2],sourceMap:i[3]};n[a]?n[a].parts.push(c):r.push(n[a]={id:a,parts:[c]})}return r}function m(e,t){var r=s(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=p[p.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),p.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(e.insertAt.before,r);r.insertBefore(t,o)}}function v(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=p.indexOf(e);t>=0&&p.splice(t,1)}function g(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var n=r.nc;n&&(e.attrs.nonce=n)}return y(t,e.attrs),m(e,t),t}function y(e,t){Object.keys(t).forEach((function(r){e.setAttribute(r,t[r])}))}function b(e,t){var r,n,o,i;if(t.transform&&e.css){if(!(i="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=i}if(t.singleton){var a=l++;r=u||(u=g(t)),n=k.bind(null,r,a,!1),o=k.bind(null,r,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",y(t,e.attrs),m(e,t),t}(t),n=S.bind(null,r,t),o=function(){v(r),r.href&&URL.revokeObjectURL(r.href)}):(r=g(t),n=x.bind(null,r),o=function(){v(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=h(e,t);return f(r,t),function(e){for(var n=[],o=0;o<r.length;o++){var a=r[o];(c=i[a.id]).refs--,n.push(c)}for(e&&f(h(e,t),t),o=0;o<n.length;o++){var c;if(0===(c=n[o]).refs){for(var s=0;s<c.parts.length;s++)c.parts[s]();delete i[c.id]}}}};var w,_=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function k(e,t,r,n){var o=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=_(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function x(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function S(e,t,r){var n=r.css,o=r.sourceMap,i=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||i)&&(n=d(n)),o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([n],{type:"text/css"}),c=e.href;e.href=URL.createObjectURL(a),c&&URL.revokeObjectURL(c)}},4147:e=>{"use strict";e.exports=JSON.parse('{"name":"route-widget-shopify","version":"3.1.0","description":"Route widget wrapper for Shopify","main":"src/index.js","repository":"git@gitlab.com:route/b2b-core/ecommerce-integrations/shopify-widget-v1.2.git","browserslist":[">1%","last 4 versions","Firefox ESR","not ie < 9"],"scripts":{"start":"parcel src/index.html --out-dir dist-dev --open","build":"NODE_ENV=production webpack --mode=production","build-stage":"NODE_ENV=stage webpack --mode=production","deploy-images-dev":"aws s3 sync dist/images s3://route-cdn-test-bucket/route-widget/images --profile route-cdn --acl public-read","deploy-images-prod":"aws s3 sync dist/images s3://route-cdn/route-widget/images --profile route-prod --acl public-read","update-version":"./update-version.sh","deploy-dev":"./deploy-dev.sh","deploy-prod":"./deploy-prod.sh","dev":"webpack --mode=development --watch --output-path=dist-dev","lint":"eslint src/**/*.js","lint-fix":"eslint --fix src/**/*.js","test":"./run-cypress-local.sh run","test-open":"./run-cypress-local.sh open","unit-test":"jest","unit-test:watch":"jest --watch","unit-test:coverage":"jest --coverage","e2e-test":"./run-cypress-local.sh run","cy:run":"cypress run --browser chrome --headless --config defaultCommandTimeout=10000","cy:open":"cypress open"},"engines":{"node":">=14.17"},"author":"Route Protect Team","license":"ISC","dependencies":{"@sentry/browser":"^7.9.0","axios":"^0.26.0","node-sass":"^5.0.0","preact":"^10.1.1","prop-types":"^15.6.2"},"devDependencies":{"@babel/core":"^7.1.2","@babel/plugin-proposal-class-properties":"^7.1.0","@babel/plugin-transform-react-jsx":"^7.0.0","@babel/plugin-transform-runtime":"^7.1.0","@babel/preset-env":"7.9.6","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@semantic-release/gitlab":"^9.4.1","@sentry/webpack-plugin":"^1.18.8","autoprefixer":"^9.2.1","babel-eslint":"^10.0.1","babel-loader":"^8.0.4","babel-preset-preact":"^1.1.0","chai":"^4.3.0","css-loader":"^1.0.0","cypress":"^9.5.1","cypress-iframe":"^1.0.1","enzyme":"^3.11.0","enzyme-adapter-preact-pure":"^3.0.0","eslint":"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-config-prettier":"^8.3.0","eslint-plugin-cypress":"^2.12.1","eslint-plugin-import":"^2.25.2","eslint-plugin-jest":"^21.27.2","eslint-plugin-prettier":"^4.0.0","eslint-plugin-react":"^7.26.1","file-loader":"^2.0.0","husky":"^4.3.8","jest":"^27.0.0","parcel-bundler":"^1.12.5","postcss-flexbugs-fixes":"^4.1.0","postcss-loader":"^3.0.0","prettier":"^2.4.1","sass-loader":"^10.1.0","style-loader":"^0.23.1","webpack":"^5.68.0","webpack-cli":"^4.9.2"},"release":{"plugins":["@semantic-release/commit-analyzer","@semantic-release/release-notes-generator","@semantic-release/changelog","@semantic-release/npm","@semantic-release/git","@semantic-release/gitlab"]}}')}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return r[e](i,i.exports,o),i.loaded=!0,i.exports}o.m=r,o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,r)=>(o.f[r](e,t),t)),[])),o.u=e=>"route-widget-shopify-"+e+"-v2.min.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="route-widget-shopify:",o.l=(r,n,i,a)=>{if(e[r])e[r].push(n);else{var c,s;if(void 0!==i)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var p=u[l];if(p.getAttribute("src")==r||p.getAttribute("data-webpack")==t+i){c=p;break}}c||(s=!0,(c=document.createElement("script")).charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.setAttribute("data-webpack",t+i),c.src=r),e[r]=[n];var d=(t,n)=>{c.onerror=c.onload=null,clearTimeout(f);var o=e[r];if(delete e[r],c.parentNode&&c.parentNode.removeChild(c),o&&o.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=d.bind(null,c.onerror),c.onload=d.bind(null,c.onload),s&&document.head.appendChild(c)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={stable:0};o.f.j=(t,r)=>{var n=o.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise(((r,o)=>n=e[t]=[r,o]));r.push(n[2]=i);var a=o.p+o.u(t),c=new Error;o.l(a,(r=>{if(o.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;c.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",c.name="ChunkLoadError",c.type=i,c.request=a,n[1](c)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,i,[a,c,s]=r,u=0;if(a.some((t=>0!==e[t]))){for(n in c)o.o(c,n)&&(o.m[n]=c[n]);s&&s(o)}for(t&&t(r);u<a.length;u++)i=a[u],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkroute_widget_shopify=self.webpackChunkroute_widget_shopify||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var i,a={};return(i="undefined"!=typeof window?window:void 0!==o.g?o.g:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"shopify-widget@3.1.0"},i.SENTRY_RELEASES=i.SENTRY_RELEASES||{},i.SENTRY_RELEASES["shopify-widget-v2@route-app-inc"]={id:"shopify-widget@3.1.0"},(()=>{"use strict";function e(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function t(t){return function(){var r=this,n=arguments;return new Promise((function(o,i){var a=t.apply(r,n);function c(t){e(a,o,i,c,s,"next",t)}function s(t){e(a,o,i,c,s,"throw",t)}c(void 0)}))}}o.r(a);var r=o(8129),n=o.n(r);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function s(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}o(1038);var u=function(){if(window.location.href.includes("#route-debug")){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=console).log.apply(e,["[ROUTE-LOG]"].concat(r))}},l=o(4418),p=function(){var e;function r(){return i.apply(this,arguments)}function i(){return(i=t(n().mark((function e(){var t,r,i,a,c,p,d,f,h;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.e("SentryBrowser").then(o.bind(o,976));case 3:return t=e.sent,r=t.BrowserClient,i=t.Hub,a=t.makeFetchTransport,c=t.defaultStackParser,p=t.defaultIntegrations,d=/localhost:1234|sentry\.spec\.js|route-widget-shopify-stable\.min\.js|route-widget-shopify-stable-v2\.min\.js/gim,f=new r({dsn:l.sentryDSN,release:l.sentryRelease,sampleRate:.2,environment:"production",transport:a,stackParser:c,integrations:s(p),beforeSend:function(e,t){var r,n,o,i,a,c,s=t.originalException;return null!=s&&null!==(r=s.message)&&void 0!==r&&r.match(/Network Error/i)?null:(null==e||null===(n=e.exception)||void 0===n||null===(o=n.values[0])||void 0===o||null===(i=o.stacktrace)||void 0===i||null===(a=i.frames[0])||void 0===a||null===(c=a.filename)||void 0===c?void 0:c.match(d))&&e}}),(h=new i(f)).run((function(e){e.configureScope((function(e){var t,r,n,o={"location.href":window.location.href,"shopify.shop":null===(t=window.Shopify)||void 0===t?void 0:t.shop,"shopify.theme.name":null===(r=window.Shopify)||void 0===r||null===(n=r.theme)||void 0===n?void 0:n.name};e.setExtras(o)}))})),e.abrupt("return",h);case 16:e.prev=16,e.t0=e.catch(0),u(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}return{captureException:function(o){return t(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,u(o),void 0!==e){t.next=6;break}return t.next=5,r();case 5:e=t.sent;case 6:e.captureException(o),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),u(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},captureExceptionWithBreadcrumb:function(o,i){return t(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,u(o),void 0!==e){t.next=6;break}return t.next=5,r();case 5:e=t.sent;case 6:e.addBreadcrumb(i),e.captureException(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),u(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}}}();const d=p;var f,h,m,v,g,y,b={},w=[],_=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function k(e,t){for(var r in t)e[r]=t[r];return e}function x(e){var t=e.parentNode;t&&t.removeChild(e)}function S(e,t,r){var n,o,i,a={};for(i in t)"key"==i?n=t[i]:"ref"==i?o=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?f.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===a[i]&&(a[i]=e.defaultProps[i]);return C(e,a,n,o,null)}function C(e,t,r,n,o){var i={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++m:o};return null==o&&null!=h.vnode&&h.vnode(i),i}function R(e){return e.children}function E(e,t){this.props=e,this.context=t}function I(e,t){if(null==t)return e.__?I(e.__,e.__.__k.indexOf(e)+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?I(e):null}function A(e){var t,r;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e){e.__e=e.__c.base=r.__e;break}return A(e)}}function O(e){(!e.__d&&(e.__d=!0)&&v.push(e)&&!T.__r++||y!==h.debounceRendering)&&((y=h.debounceRendering)||g)(T)}function T(){for(var e;T.__r=v.length;)e=v.sort((function(e,t){return e.__v.__b-t.__v.__b})),v=[],e.some((function(e){var t,r,n,o,i,a;e.__d&&(i=(o=(t=e).__v).__e,(a=t.__P)&&(r=[],(n=k({},o)).__v=o.__v+1,M(a,o,n,t.__n,void 0!==a.ownerSVGElement,null!=o.__h?[i]:null,r,null==i?I(o):i,o.__h),W(r,o),o.__e!=i&&A(o)))}))}function P(e,t,r,n,o,i,a,c,s,u){var l,p,d,f,h,m,v,g=n&&n.__k||w,y=g.length;for(r.__k=[],l=0;l<t.length;l++)if(null!=(f=r.__k[l]=null==(f=t[l])||"boolean"==typeof f?null:"string"==typeof f||"number"==typeof f||"bigint"==typeof f?C(null,f,null,null,f):Array.isArray(f)?C(R,{children:f},null,null,null):f.__b>0?C(f.type,f.props,f.key,null,f.__v):f)){if(f.__=r,f.__b=r.__b+1,null===(d=g[l])||d&&f.key==d.key&&f.type===d.type)g[l]=void 0;else for(p=0;p<y;p++){if((d=g[p])&&f.key==d.key&&f.type===d.type){g[p]=void 0;break}d=null}M(e,f,d=d||b,o,i,a,c,s,u),h=f.__e,(p=f.ref)&&d.ref!=p&&(v||(v=[]),d.ref&&v.push(d.ref,null,f),v.push(p,f.__c||h,f)),null!=h?(null==m&&(m=h),"function"==typeof f.type&&f.__k===d.__k?f.__d=s=L(f,s,e):s=N(e,f,d,g,h,s),"function"==typeof r.type&&(r.__d=s)):s&&d.__e==s&&s.parentNode!=e&&(s=I(d))}for(r.__e=m,l=y;l--;)null!=g[l]&&("function"==typeof r.type&&null!=g[l].__e&&g[l].__e==r.__d&&(r.__d=I(n,l+1)),H(g[l],g[l]));if(v)for(l=0;l<v.length;l++)F(v[l],v[++l],v[++l])}function L(e,t,r){for(var n,o=e.__k,i=0;o&&i<o.length;i++)(n=o[i])&&(n.__=e,t="function"==typeof n.type?L(n,t,r):N(r,n,n,o,n.__e,t));return t}function N(e,t,r,n,o,i){var a,c,s;if(void 0!==t.__d)a=t.__d,t.__d=void 0;else if(null==r||o!=i||null==o.parentNode)e:if(null==i||i.parentNode!==e)e.appendChild(o),a=null;else{for(c=i,s=0;(c=c.nextSibling)&&s<n.length;s+=2)if(c==o)break e;e.insertBefore(o,i),a=i}return void 0!==a?a:o.nextSibling}function j(e,t,r){"-"===t[0]?e.setProperty(t,r):e[t]=null==r?"":"number"!=typeof r||_.test(t)?r:r+"px"}function D(e,t,r,n,o){var i;e:if("style"===t)if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||j(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||j(e.style,t,r[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=r,r?n||e.addEventListener(t,i?U:B,i):e.removeEventListener(t,i?U:B,i);else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null!=r&&(!1!==r||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,r):e.removeAttribute(t))}}function B(e){this.l[e.type+!1](h.event?h.event(e):e)}function U(e){this.l[e.type+!0](h.event?h.event(e):e)}function M(e,t,r,n,o,i,a,c,s){var u,l,p,d,f,m,v,g,y,b,w,_=t.type;if(void 0!==t.constructor)return null;null!=r.__h&&(s=r.__h,c=t.__e=r.__e,t.__h=null,i=[c]),(u=h.__b)&&u(t);try{e:if("function"==typeof _){if(g=t.props,y=(u=_.contextType)&&n[u.__c],b=u?y?y.props.value:u.__:n,r.__c?v=(l=t.__c=r.__c).__=l.__E:("prototype"in _&&_.prototype.render?t.__c=l=new _(g,b):(t.__c=l=new E(g,b),l.constructor=_,l.render=G),y&&y.sub(l),l.props=g,l.state||(l.state={}),l.context=b,l.__n=n,p=l.__d=!0,l.__h=[]),null==l.__s&&(l.__s=l.state),null!=_.getDerivedStateFromProps&&(l.__s==l.state&&(l.__s=k({},l.__s)),k(l.__s,_.getDerivedStateFromProps(g,l.__s))),d=l.props,f=l.state,p)null==_.getDerivedStateFromProps&&null!=l.componentWillMount&&l.componentWillMount(),null!=l.componentDidMount&&l.__h.push(l.componentDidMount);else{if(null==_.getDerivedStateFromProps&&g!==d&&null!=l.componentWillReceiveProps&&l.componentWillReceiveProps(g,b),!l.__e&&null!=l.shouldComponentUpdate&&!1===l.shouldComponentUpdate(g,l.__s,b)||t.__v===r.__v){l.props=g,l.state=l.__s,t.__v!==r.__v&&(l.__d=!1),l.__v=t,t.__e=r.__e,t.__k=r.__k,t.__k.forEach((function(e){e&&(e.__=t)})),l.__h.length&&a.push(l);break e}null!=l.componentWillUpdate&&l.componentWillUpdate(g,l.__s,b),null!=l.componentDidUpdate&&l.__h.push((function(){l.componentDidUpdate(d,f,m)}))}l.context=b,l.props=g,l.state=l.__s,(u=h.__r)&&u(t),l.__d=!1,l.__v=t,l.__P=e,u=l.render(l.props,l.state,l.context),l.state=l.__s,null!=l.getChildContext&&(n=k(k({},n),l.getChildContext())),p||null==l.getSnapshotBeforeUpdate||(m=l.getSnapshotBeforeUpdate(d,f)),w=null!=u&&u.type===R&&null==u.key?u.props.children:u,P(e,Array.isArray(w)?w:[w],t,r,n,o,i,a,c,s),l.base=t.__e,t.__h=null,l.__h.length&&a.push(l),v&&(l.__E=l.__=null),l.__e=!1}else null==i&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=q(r.__e,t,r,n,o,i,a,s);(u=h.diffed)&&u(t)}catch(e){t.__v=null,(s||null!=i)&&(t.__e=c,t.__h=!!s,i[i.indexOf(c)]=null),h.__e(e,t,r)}}function W(e,t){h.__c&&h.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){h.__e(e,t.__v)}}))}function q(e,t,r,n,o,i,a,c){var s,u,l,p=r.props,d=t.props,h=t.type,m=0;if("svg"===h&&(o=!0),null!=i)for(;m<i.length;m++)if((s=i[m])&&(s===e||(h?s.localName==h:3==s.nodeType))){e=s,i[m]=null;break}if(null==e){if(null===h)return document.createTextNode(d);e=o?document.createElementNS("http://www.w3.org/2000/svg",h):document.createElement(h,d.is&&d),i=null,c=!1}if(null===h)p===d||c&&e.data===d||(e.data=d);else{if(i=i&&f.call(e.childNodes),u=(p=r.props||b).dangerouslySetInnerHTML,l=d.dangerouslySetInnerHTML,!c){if(null!=i)for(p={},m=0;m<e.attributes.length;m++)p[e.attributes[m].name]=e.attributes[m].value;(l||u)&&(l&&(u&&l.__html==u.__html||l.__html===e.innerHTML)||(e.innerHTML=l&&l.__html||""))}if(function(e,t,r,n,o){var i;for(i in r)"children"===i||"key"===i||i in t||D(e,i,null,r[i],n);for(i in t)o&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||r[i]===t[i]||D(e,i,t[i],r[i],n)}(e,d,p,o,c),l)t.__k=[];else if(m=t.props.children,P(e,Array.isArray(m)?m:[m],t,r,n,o&&"foreignObject"!==h,i,a,i?i[0]:r.__k&&I(r,0),c),null!=i)for(m=i.length;m--;)null!=i[m]&&x(i[m]);c||("value"in d&&void 0!==(m=d.value)&&(m!==e.value||"progress"===h&&!m)&&D(e,"value",m,p.value,!1),"checked"in d&&void 0!==(m=d.checked)&&m!==e.checked&&D(e,"checked",m,p.checked,!1))}return e}function F(e,t,r){try{"function"==typeof e?e(t):e.current=t}catch(e){h.__e(e,r)}}function H(e,t,r){var n,o;if(h.unmount&&h.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||F(n,null,t)),null!=(n=e.__c)){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(e){h.__e(e,t)}n.base=n.__P=null}if(n=e.__k)for(o=0;o<n.length;o++)n[o]&&H(n[o],t,"function"!=typeof e.type);r||null==e.__e||x(e.__e),e.__e=e.__d=void 0}function G(e,t,r){return this.constructor(e,r)}function V(e,t,r){var n,o,i;h.__&&h.__(e,t),o=(n="function"==typeof r)?null:r&&r.__k||t.__k,i=[],M(t,e=(!n&&r||t).__k=S(R,null,[e]),o||b,b,void 0!==t.ownerSVGElement,!n&&r?[r]:o?null:t.firstChild?f.call(t.childNodes):null,i,!n&&r?r:o?o.__e:t.firstChild,n),W(i,e)}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function K(e,t,r){return t&&X(e.prototype,t),r&&X(e,r),e}function Y(e,t){return Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Y(e,t)}function Q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e,t){if(t&&("object"===$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return z(e)}function ee(e){return ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ee(e)}function te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}f=w.slice,h={__e:function(e,t){for(var r,n,o;t=t.__;)if((r=t.__c)&&!r.__)try{if((n=r.constructor)&&null!=n.getDerivedStateFromError&&(r.setState(n.getDerivedStateFromError(e)),o=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e),o=r.__d),o)return r.__E=r}catch(t){e=t}throw e}},m=0,E.prototype.setState=function(e,t){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=k({},this.state),"function"==typeof e&&(e=e(k({},r),this.props)),e&&k(r,e),null!=e&&this.__v&&(t&&this.__h.push(t),O(this))},E.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),O(this))},E.prototype.render=R,v=[],g="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,T.__r=0;var re=void 0,ne=function(){var e=t(n().mark((function e(t){var r,o,i=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=i.length>1&&void 0!==i[1]?i[1]:{},"function"!=typeof window.CustomEvent&&(window.CustomEvent=re.CustomEvent),(o=new CustomEvent(t,{detail:r})).initEvent(t,!0,!0),document.dispatchEvent(o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){return window.location.href.includes("checkouts")&&!window.location.href.includes("thank_you")&&!window.location.href.includes("account/login")},ie=function(){return window.location.href.includes("orders/")||window.location.href.includes("checkouts")&&window.location.href.includes("thank_you")},ae=function(){return oe()&&window.location.href.includes("step=payment_method")};function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ue=function(){function e(){J(this,e)}var r;return K(e,null,[{key:"init",value:(r=t(n().mark((function t(r,o,i,a,c,s,p,f,h){var m,v,g,y=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u("* Middleware - init"),null===(m=window)||void 0===m||null===(v=m.Routeapp)||void 0===v||null===(g=v.analytics)||void 0===g||g.send({action:"track_performance",event_category:"route-widget",event_label:"protect-core-load-start",value:Math.round(window.performance.now())}),t.next=4,e.fetchProtectCoreScript("".concat(l.protectCoreURL,"?shop=").concat(a)).then((function(){var t,n,u;null===(t=window)||void 0===t||null===(n=t.Routeapp)||void 0===n||null===(u=n.analytics)||void 0===u||u.send({action:"track_performance",event_category:"route-widget",event_label:"protect-core-load-end",value:Math.round(window.performance.now())}),y.widget=window.Route,y.storeDomain=a,y.environment=e.convertEnvironment(c.toLowerCase()),y.merchantId=s,y.storeName=p,y.theming=e.buildTheming(f,h),e.loadListeners(r,o,i)})).catch((function(e){d.captureExceptionWithBreadcrumb(e,{message:"error during ShopifyWidgetMiddleware",level:"error"})}));case 4:case"end":return t.stop()}}),t)}))),function(e,t,n,o,i,a,c,s,u){return r.apply(this,arguments)})},{key:"buildTheming",value:function(t,r){return r=e.convertDeskopAlign(r),se(se({},t&&{mode:this.widget.Theme.Mode.DarkMode}),r&&{alignment:r})}},{key:"convertDeskopAlign",value:function(e){switch(e){case"left":return this.widget.Theme.Alignment.Left;case"center":return this.widget.Theme.Alignment.Center;case"right":return this.widget.Theme.Alignment.Right;default:return}}},{key:"config",value:function(t,r,n,o){try{u("* Middleware - config: \n",this.storeDomain,{subtotal:t,currency:r,status:n}),n=e.convertStatus(n),this.widget.Protection.render({storeDomain:this.storeDomain,subtotal:t,currency:r,environment:this.environment,status:n,merchantId:this.merchantId,storeName:this.storeName,theming:this.theming,cartRef:o})}catch(e){d.captureExceptionWithBreadcrumb(e,{message:"error during ShopifyWidgetMiddleware config",level:"error"})}}},{key:"convertStatus",value:function(e){switch(e){case!0:return Route.Coverage.ActiveByDefault;case!1:return Route.Coverage.InactiveByDefault}}},{key:"convertEnvironment",value:function(e){return"production"===e?Route.Environment.Production:Route.Environment.Dev}},{key:"loadListeners",value:function(t,r,n){e.onLoad(),e.onRendered(),e.onStatusChange(t),e.onGetQuote(r),e.onModalOpen()}},{key:"onLoad",value:function(){this.widget.Protection.on("load",(function(){try{var e,t;null===(e=window)||void 0===e||null===(t=e.Routeapp)||void 0===t||t.analytics.send({action:"load",event_category:"route-widget",event_label:"widget",value:!0})}catch(e){d.captureExceptionWithBreadcrumb(e,{message:"error during ShopifyWidgetMiddleware onLoad",level:"error"})}u("* Event: Loaded!")}))}},{key:"onRendered",value:function(){var e=this;this.widget.Protection.on("rendered",(function(){try{ne("route:render",{rendered:!0}),window.Routeapp.analytics.send({action:"render",event_category:"route-widget",event_label:"widget",value:!0}),window.Routeapp.analytics.send({action:"widget-location-v2",event_category:"route-widget",event_label:"{\n            name: ".concat(e.storeName,",\n            domain: ").concat(e.storeDomain,",\n            merchantId: ").concat(e.merchantId,",\n            location: ").concat(oe()?"checkouts":"cart",",\n          }"),value:!0}),u("* Event: Rendered!")}catch(e){d.captureExceptionWithBreadcrumb(e,{message:"error during ShopifyWidgetMiddleware onRendered",level:"error"})}}))}},{key:"onStatusChange",value:function(e){this.widget.Protection.on("status_change",(function(t){window.Routeapp.analytics.send({action:t.to?"check":"uncheck",event_category:"route-widget",event_label:"checkbox",value:t.to}),e(t.to),u("* Event: Checked! - ",t.to)}))}},{key:"onGetQuote",value:function(e){this.widget.Protection.on("get_quote",(function(t){e(t.quote),u("* Event: Got quote! -",t.quote)}))}},{key:"onCreateQuote",value:function(e){this.widget.Protection.on("create_quote",(function(t){e(t.quote.id),u("* Event: Got create quote")}))}},{key:"onModalOpen",value:function(){this.widget.Protection.on("modal_open",(function(e){window.Routeapp.analytics.send({action:"click",event_category:"route-widget",event_label:"icon",value:e.to}),u("* Event: Modal triggered!")}))}},{key:"updateQuoteWithVariant",value:function(e){this.widget.Protection.forceUpdateQuote(e,!1)}},{key:"setRouteOff",value:function(){u("* Setting Route"),this.widget.Protection.hide()}},{key:"createQuote",value:function(e,t,r,n){u("* Middleware - createQuote "),this.widget.Protection.createQuote(e,t,r,n)}}]),e}();te(ue,"widget",void 0),te(ue,"storeDomain",void 0),te(ue,"environment",void 0),te(ue,"merchantId",void 0),te(ue,"storeName",void 0),te(ue,"theming",void 0),te(ue,"fetchProtectCoreScript",(function(e){return new Promise((function(t,r){var n;if(null!==(n=window.Route)&&void 0!==n&&n.Protection)return t();var o=document.createElement("script");o.setAttribute("src",e),o.setAttribute("data-route-widget","true"),o.addEventListener("load",t),o.addEventListener("error",(function(e){r(new Error("Failed to load ".concat(e.target.src)))})),ue.removeProtectCoreScripts(),document.body.appendChild(o)}))})),te(ue,"removeProtectCoreScripts",(function(){for(var e=document.querySelectorAll("[data-route-widget]"),t=0;t<e.length;t++)e[t].remove()}));var le=o(1806),pe=o.n(le);const de={isSupported:function(e){try{var t="__some_random_key_to_test";return e().setItem(t,t),e().removeItem(t),!0}catch(e){return!1}},storageActionItem:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";try{return this.isSupported(e)?"setItem"===t?e()[t](r,n):e()[t](r):null}catch(e){return null}}};function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach((function(t){te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var me="route-merchant-info";function ve(){var e,t="";return window.Shopify&&void 0!==window.Shopify?t=window.Shopify.shop||(null===(e=window.Shopify.Checkout)||void 0===e?void 0:e.apiHost)||window.location.hostname:(t=document.location.origin.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").split("/")[0],window.Routeapp.analytics.send({action:"error_reading_shopifyhook",event_category:"route-widget",event_label:"widget"})),t}function ge(){var e,t,r,n=null===(e=window.Shopify)||void 0===e||null===(t=e.Checkout)||void 0===t?void 0:t.token,o=null===(r=document.querySelector('meta[name="shopify-checkout-authorization-token"]'))||void 0===r?void 0:r.content;return"gid://shopify/Checkout/".concat(n,"?key=").concat(o)}function ye(){var e,t,r=ve(),n=oe()?null===(e=window.Shopify)||void 0===e||null===(t=e.Checkout)||void 0===t?void 0:t.token:"",o={shop:r,checkoutToken:n,shopifyCheckoutAuthorizationToken:oe()&&n?document.querySelector("[name=shopify-checkout-authorization-token]").getAttribute("content"):"","Content-type":"application/json;charset=UTF-8"};return oe()&&xe()?he(he({},o),{},{"X-Shopify-Domain":r,"X-Shopify-Checkout-Token":ge(),"X-Shopify-Storefront-Token":de.storageActionItem((function(){return sessionStorage}),"getItem","route-storefront-token")}):o}var be=function(){var e=t(n().mark((function e(){var t,r,o,i,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(o=de.storageActionItem((function(){return localStorage}),"getItem",me)&&JSON.parse(de.storageActionItem((function(){return localStorage}),"getItem",me)))&&null!=o&&null!==(t=o.merchantInfo)&&void 0!==t&&t.merchantId&&null!=o&&null!==(r=o.merchantInfo)&&void 0!==r&&r.storeName&&null!=o&&o.timestamp){e.next=4;break}return e.abrupt("return",null);case 4:if(i=o.merchantInfo,a=o.timestamp,!((new Date).getTime()-a>36e5)){e.next=10;break}return de.storageActionItem((function(){return localStorage}),"removeItem",me),e.abrupt("return",null);case 10:return e.abrupt("return",i);case 13:e.prev=13,e.t0=e.catch(0),d.captureExceptionWithBreadcrumb(e.t0,{message:"error during getMerchantInfoFromLocal",level:"error"}),console.error("error getting route merchant info from local: ",e.t0);case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=t(n().mark((function e(t){var r,o,i,a,c,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=3,o=0;case 2:return e.prev=3,e.next=6,pe().get("".concat(l.shopifyServiceURL,"/v1/merchant-info/").concat(t));case 6:if(i=e.sent,(a=i.data)&&null!=a&&a.merchantId&&null!=a&&a.storeName){e.next=10;break}return e.abrupt("return",null);case 10:return c={merchantId:a.merchantId,storeName:a.storeName},s=JSON.stringify({merchantInfo:c,timestamp:(new Date).getTime()}),de.storageActionItem((function(){return localStorage}),"setItem",me,s),e.abrupt("return",c);case 16:if(e.prev=16,e.t0=e.catch(3),++o!==r){e.next=23;break}return console.error("error getting merchant info from remote: ".concat(t)),window.Routeapp.analytics.send({action:"error_getting_merchant_info",event_category:"route-widget",event_label:"widget",value:JSON.stringify(e.t0)}),d.captureExceptionWithBreadcrumb(e.t0,{message:"error during getMerchantInfoFromRemote",level:"error"}),e.abrupt("break",25);case 23:e.next=2;break;case 25:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}();function _e(e){return ke.apply(this,arguments)}function ke(){return(ke=t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be();case 2:if(e.t1=e.sent,e.t1){e.next=7;break}return e.next=6,we(t);case 6:e.t1=e.sent;case 7:if(e.t0=e.t1,e.t0){e.next=10;break}e.t0=null;case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(){return de.storageActionItem((function(){return sessionStorage}),"getItem","route-storefront-token")}var Se=o(2604);function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Re=function(e){return!!e&&e.some((function(e){return e.selling_plan_id}))},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.filter((function(e){return e.requires_shipping&&"route"!==e.vendor.toLowerCase()&&e.product_title!==t}))},Ie=function(e,t,r){try{return Ee(e,r).filter((function(e){return 0!==e.quantity})).map((function(e){var t=e.original_line_price?e.original_line_price:e.final_line_price;return{id:e.id.toString(),unit_price:(t/100).toFixed(2),quantity:e.quantity}}))}catch(e){d.captureExceptionWithBreadcrumb(e,{message:"error during getCartItemsArray",level:"error"})}},Ae=function(e,t){var r,n="".concat(e,":1"),o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ce(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;n+=",".concat(i.id,":").concat(i.quantity)}}catch(e){o.e(e)}finally{o.f()}return n};function Oe(){window.cachedCart=null}function Te(e){return e&&e.headlessWidget?l.headlessApiURL:document.location.origin}var Pe=function(){var e=t(n().mark((function e(t){var r,o,i,a,c,s,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.cachedCart||t.ignoreCachedCart){e.next=3;break}return e.abrupt("return",window.cachedCart);case 3:return r=Te(t),o=(new Date).getTime(),i="".concat(r,"/cart.js?timestamp=").concat(o),i=(0,Se.c)(i),a=ye(),e.next=10,pe().get(i,{headers:a});case 10:return l=void 0,p=void 0,(null==(n=c=e.sent)||null===(l=n.data)||void 0===l||null===(p=l.items)||void 0===p?void 0:p.length)>0&&(window.cachedCart=n,setTimeout(Oe,2500)),e.abrupt("return",c);case 15:e.prev=15,e.t0=e.catch(0),console.error("error when getting cart: ",e.t0),(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.status)>=401&&(null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u?void 0:u.status)<500||d.captureExceptionWithBreadcrumb(e.t0,{message:"error during getShopifyCart",level:"error"});case 19:return e.abrupt("return",{});case 20:case"end":return e.stop()}var n,l,p}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),Le=function(){var e=t(n().mark((function e(t,r){var o,i,a,c,s,u,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=Te(r),i=ye(),oe()&&window.Routeapp.analytics.send({action:"checkout-updateShopifyCart()-initiated",event_category:"route-widget - update cart",event_label:"{\n          store: ".concat(o,",\n          checkout_token: ").concat(null===(a=window.Shopify)||void 0===a||null===(c=a.Checkout)||void 0===c?void 0:c.token,",\n        }"),value:!0}),e.next=6,pe().post("".concat(o,"/cart/update.js"),t,{headers:i});case 6:return s=e.sent,oe()&&window.Routeapp.analytics.send({action:"checkout-updateShopifyCart()-completed",event_category:"route-widget - update cart",event_label:"{\n          store: ".concat(o,",\n          checkout_token: ").concat(null===(u=window.Shopify)||void 0===u||null===(l=u.Checkout)||void 0===l?void 0:l.token,",\n        }"),value:!0}),Oe(),e.abrupt("return",s);case 12:e.prev=12,e.t0=e.catch(0),d.captureExceptionWithBreadcrumb(e.t0,{message:"error during updateShopifyCart",level:"error"});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r){return e.apply(this,arguments)}}(),Ne=function(){var e=t(n().mark((function e(t,r){var o,i,a,c,s,u,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=Te(r),u=ye(),window.Routeapp.analytics.send({action:"headless-updateShopifyCart()-initiated",event_category:"route-widget - update cart",event_label:"{\n        store: ".concat(s,",\n        checkout_token: ").concat(null===(o=window.Shopify)||void 0===o||null===(i=o.Checkout)||void 0===i?void 0:i.token,",\n      }"),value:!0}),e.next=6,pe().post("".concat(s,"/cart/update.js"),t,{headers:u});case 6:return l=e.sent,window.Routeapp.analytics.send({action:"headless-updateShopifyCart()-completed",event_category:"route-widget - update cart",event_label:"{\n        store: ".concat(s,",\n        checkout_token: ").concat(null===(a=window.Shopify)||void 0===a||null===(c=a.Checkout)||void 0===c?void 0:c.token,",\n      }"),value:!0}),e.abrupt("return",l);case 11:e.prev=11,e.t0=e.catch(0),d.captureExceptionWithBreadcrumb(e.t0,{message:"error during updateShopifyCartHeadless",level:"error"});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}(),je=function(){var e=t(n().mark((function e(r){var o,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=0,i=setInterval(t(n().mark((function e(){var a,c,s,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(){return(u=t(n().mark((function e(){var t,r,o,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==de.storageActionItem((function(){return sessionStorage}),"getItem","routeChecked")){e.next=2;break}return e.abrupt("return");case 2:return t="true"===de.storageActionItem((function(){return sessionStorage}),"getItem","routeChecked"),e.next=5,a();case 5:if(r=e.sent,t!==r){e.next=14;break}return e.next=9,pe().get(document.location);case 9:o=e.sent,(c=document.createElement("div")).innerHTML=o.data,document.querySelector("#order-summary").innerHTML=c.querySelector("#order-summary").innerHTML,clearInterval(i);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)},s=function(){return u.apply(this,arguments)},c=function(){return(c=t(n().mark((function e(){var t,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe(r);case 2:t=e.sent,o=0;case 4:if(!(o<t.data.items.length)){e.next=10;break}if("Route"!==t.data.items[o].vendor){e.next=7;break}return e.abrupt("return",!0);case 7:o++,e.next=4;break;case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)},a=function(){return c.apply(this,arguments)},o>10&&clearInterval(i),!ae()){e.next=8;break}return e.next=8,s();case 8:o++;case 9:case"end":return e.stop()}}),e)}))),500);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();const De={getShopifyCart:Pe,getCartSubtotal:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{var r=0;if(!e||null==e||!e.items)return r;var n=Ee(e.items,t);if(n)for(var o=0;o<n.length;o++){var i=n[o];r+=i.original_line_price?i.original_line_price:i.final_line_price}return r}catch(e){d.captureExceptionWithBreadcrumb(e,{message:"error during getCartSubtotal",level:"error"})}},updateShopifyCart:Le,updateShopifyCartHeadless:Ne,updateOrderSummaryPaymentPage:je};var Be=o(7106),Ue=function(){function e(t){var r=this;J(this,e),this.interceptors=[],this.callbacks={},t.forEach((function(e){r.addInterceptor(e)}))}return K(e,[{key:"addInterceptor",value:function(e){this.interceptors.push(new e)}},{key:"intercept",value:function(){var e=this;this.interceptors.forEach((function(t){return t.intercept(e.callbacks)}))}},{key:"release",value:function(){this.interceptors.forEach((function(e){return e.release()}))}},{key:"on",value:function(e,t){this.callbacks[e]?this.callbacks[e].push(t):this.callbacks[e]=[t]}}]),e}(),Me=function(){function e(){J(this,e),this.interceptions={},this.requestBody}return K(e,[{key:"intercept",value:function(e){this.callbacks=e;var t=XMLHttpRequest.prototype,r=t.send,n=t.open,o=this;t.open=function(e,t){return e=e||"GET",o.interceptions={method:e,url:t},o.interceptOpen(),n.apply(this,arguments)},t.send=function(e){var t=this,n=this;o.requestBody=e,n.addEventListener("readystatechange",(function(){4===n.readyState&&(t.response?o.interceptSend(t.response,o.requestBody):"text"!==t.responseType&&""!==t.responseType||!t.responseText||o.interceptSend(t.responseText,o.requestBody))})),r.apply(n,arguments)}}},{key:"interceptOpen",value:function(){}},{key:"interceptSend",value:function(e,t){var r,n,o;null!==(r=this.interceptions.url)&&void 0!==r&&r.match(/cart.(change)/g)&&this.callbacks["http-cart-change"]?this.callbacks["http-cart-change"].forEach((function(e){return e()})):null!==(n=this.interceptions.url)&&void 0!==n&&n.match(/cart.(update)/g)&&this.callbacks["http-cart-update"]?this.callbacks["http-cart-update"].forEach((function(e){return e(t)})):null!==(o=this.interceptions.url)&&void 0!==o&&o.match(/cart.(add)/g)&&this.callbacks["http-cart-add"]&&this.callbacks["http-cart-add"].forEach((function(e){return e(t)}))}}]),e}(),We=function(){function e(){J(this,e)}return K(e,[{key:"intercept",value:function(e){this.callbacks=e,this.interceptFetch()}},{key:"interceptFetch",value:function(){if(window.routeInterceptedFetch)return!1;var e=this,t=window.fetch;window.fetch=function(){var r=arguments,n=this;return new Promise((function(o,i){t.apply(n,r).then((function(t){"string"!=typeof r[0]&&o(t),r[0].match(/cart.(change)/g)&&e.callbacks["http-cart-change"]?e.callbacks["http-cart-change"].forEach((function(e){return e()})):r[0].match(/cart.(update)/g)&&e.callbacks["http-cart-update"]?e.callbacks["http-cart-update"].forEach((function(e){return e()})):r[0].match(/cart.(add)/g)&&e.callbacks["http-cart-add"]&&e.callbacks["http-cart-add"].forEach((function(e){return e()})),o(t)})).catch((function(e){i(e)}))}))},window.routeInterceptedFetch=!0}}]),e}(),qe=new Ue([Me,We]);var Fe=function(e){Q(f,e);var r,o,i,a,c,s,p=(c=f,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ee(c);if(s){var r=ee(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Z(this,e)});function f(){return J(this,f),p.apply(this,arguments)}return K(f,[{key:"componentDidMount",value:(a=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initProtectCore();case 2:if(e.t0=window.Route,!e.t0){e.next=6;break}return e.next=6,this.initInterceptor();case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"initProtectCore",value:(i=t(n().mark((function e(){var t=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.storeDomain=ve(),e.next=3,_e(this.storeDomain);case 3:return this.merchantInfo=e.sent,this.merchantId=this.merchantInfo&&this.merchantInfo.merchantId,e.next=7,ue.fetchProtectCoreScript("".concat(l.protectCoreURL,"?shop=").concat(this.storeDomain)).then((function(){window.Route&&(t.banner=window.Route,t.renderBanner())})).catch((function(e){d.captureExceptionWithBreadcrumb(e,{message:"error during initProtectCore",level:"error"})}));case 7:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"initInterceptor",value:(o=t(n().mark((function e(){var r=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:qe.on("http-cart-change",t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("cart CHANGE on Banner"),e.next=3,r.renderBanner();case 3:case"end":return e.stop()}}),e)})))),qe.on("http-cart-update",t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("cart UPDATE on Banner"),e.next=3,r.renderBanner();case 3:case"end":return e.stop()}}),e)})))),qe.on("http-cart-add",t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("cart ADD on Banner"),e.next=3,r.renderBanner();case 3:case"end":return e.stop()}}),e)})))),qe.intercept();case 4:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})},{key:"renderBanner",value:(r=t(n().mark((function e(){var t,r,o,i,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,De.getShopifyCart({ignoreCachedCart:!0});case 3:t=e.sent,(r=t.data)&&null!=r&&r.currency&&(i=De.getCartSubtotal(r)/100,a=null!=r&&r.currency&&Be.c.includes(r.currency.toUpperCase())?r.currency.toUpperCase():"",null===(o=this.banner)||void 0===o||o.Protection.renderBanner({environment:ue.convertEnvironment("production".toLowerCase()),storeDomain:this.storeDomain,merchantId:this.merchantId,currency:a||"",subtotal:i||0})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),d.captureExceptionWithBreadcrumb(e.t0,{message:"error during renderBanner",level:"error"}),window.Routeapp.analytics.send({action:"error_rendering_shopify_banner",event_category:"route-banner",event_label:"banner",value:JSON.stringify(e.t0)});case 12:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return r.apply(this,arguments)})}]),f}(E);function He(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}te(Fe,"banner",void 0),te(Fe,"storeDomain",void 0),te(Fe,"merchantId",void 0),te(Fe,"merchantInfo",void 0);var Ge=o(6526),Ve=o.n(Ge),Je=function(e){de.storageActionItem((function(){return localStorage}),"setItem","route-select-state",JSON.stringify({state:e?"1":"0",timestamp:(new Date).getTime()}))},Xe=function(e,t,r){var n=null;return e?n=!1:(t||r)&&(n=!0),Ke(n)},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=864e5,r=de.storageActionItem((function(){return localStorage}),"getItem","route-select-state");if(null===r)return null!==e&&Je(e),e;r=JSON.parse(r);var n=(new Date).getTime()-r.timestamp;return n>t?(de.storageActionItem((function(){return localStorage}),"removeItem","route-select-state"),e):"1"===r.state},Ye=function(e,t){var r=e.items.some((function(e){return"route"===e.vendor.toLowerCase()&&e.price>0}));return 1===e.items.length&&r?(de.storageActionItem((function(){return sessionStorage}),"setItem","addingToCart",!0),t):(t||null===t&&"checked"===de.storageActionItem((function(){return sessionStorage}),"getItem","route-default-status"))&&!r&&"false"===de.storageActionItem((function(){return sessionStorage}),"getItem","addingToCart")&&"customer"===de.storageActionItem((function(){return sessionStorage}),"getItem","payment-responsible")?(Je(!1),!1):(de.storageActionItem((function(){return sessionStorage}),"setItem","addingToCart",!1),t)},Qe=function(e){var t=e.state.loadingSpinnerActive;if(e.props.headlessWidget&&!t){var r=document.querySelector(".order-summary__sections");r&&r.classList.add("route-loading"),e.setState({loadingSpinnerActive:!0})}},$e=function(e){var t=document.querySelector(".order-summary__sections");t&&t.classList.remove("route-loading"),e.setState({loadingSpinnerActive:!1})},ze=function(){var e=t(n().mark((function e(t,r){var o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={attributes:{__quote_id:t}},e.prev=1,e.next=4,De.updateShopifyCart(o,r);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("Error setting quote id");case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,r){return e.apply(this,arguments)}}(),Ze=function(){var e=t(n().mark((function e(t){var r,o,i,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,De.getShopifyCart(t);case 3:if(r=e.sent,o=r.data,i=o.token,a=de.storageActionItem((function(){return localStorage}),"getItem","cart-ref"),i===a){e.next=11;break}return de.storageActionItem((function(){return localStorage}),"setItem","cart-ref",i),e.next=11,ze("initialized",t);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("Error init quote id",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),et=function(){var e=t(n().mark((function e(t,r){var o,i,a,c,s,u,l,p,d,f,h,m,v,g;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r.includes(",")?(p=r.split(","),d=He(p,6),i=d[0],a=d[1],c=d[2],s=d[3],u=d[4],l=d[5],c=c||"",s=s||"",u=u||"",l=l||""):i=a=r,"/cart"!==window.location.pathname){e.next=5;break}return e.next=5,tt(t,"".concat(i,",").concat(c));case 5:return f=null!==(o=s)&&void 0!==o&&o.includes("http")?s:"".concat(rt,"/").concat(s),e.next=8,it(f);case 8:if(h=e.sent,ot(i,a,h,l),!c){e.next=18;break}if(m=h,!u){e.next=17;break}return g=null!==(v=u)&&void 0!==v&&v.includes("http")?u:"".concat(rt,"/").concat(u),e.next=16,it(g);case 16:m=e.sent;case 17:ot(c,c,m,l);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,r){return e.apply(this,arguments)}}(),tt=function(){var e=t(n().mark((function e(t,r){var o,i,a,c,s,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(o=t||r).includes(",")&&(a=o.split(","),c=He(a,2),o=c[0],i=c[1]),s="".concat(rt,"/cart"),e.next=6,it(s);case 6:u=e.sent,ot(o,o,u),i&&ot(i,i,u),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}(),rt=document.location.origin,nt=function(e,t){return e.querySelector(t)},ot=function(e,t,r,n){var o=nt(document,e),i="body"===t?r:nt(r,t);i.innerHTML=i.innerHTML.replace(n,""),o.innerHTML=i.innerHTML},it=function(){var e=t(n().mark((function e(t){var r,o,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe().get(t);case 2:return r=e.sent,o=r.data,(i=document.createElement("div")).innerHTML=o,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=document.location.origin,ct="route-routeins",st="cart-currency",ut=function(){var e=t(n().mark((function e(){var t,r,o,i,a,c,s,u,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(s=de.storageActionItem((function(){return localStorage}),"getItem",ct)&&JSON.parse(de.storageActionItem((function(){return localStorage}),"getItem",ct)))&&null!=s&&s.variants&&null!=s&&s.timestamp){e.next=4;break}return e.abrupt("return",null);case 4:if(!oe()||(null===(t=window)||void 0===t||null===(r=t.Shopify)||void 0===r||null===(o=r.Checkout)||void 0===o?void 0:o.currency)===de.storageActionItem((function(){return localStorage}),"getItem",st)){e.next=6;break}return e.abrupt("return",null);case 6:if(oe()||(null===(i=window)||void 0===i||null===(a=i.Shopify)||void 0===a||null===(c=a.currency)||void 0===c?void 0:c.active)===de.storageActionItem((function(){return localStorage}),"getItem",st)){e.next=8;break}return e.abrupt("return",null);case 8:if(u=s.variants,l=s.timestamp,!((new Date).getTime()-l>36e5)){e.next=14;break}return de.storageActionItem((function(){return localStorage}),"removeItem",ct),e.abrupt("return",null);case 14:return e.abrupt("return",u);case 17:e.prev=17,e.t0=e.catch(0),console.error("error getting route variants from local: ",e.t0),d.captureExceptionWithBreadcrumb(e.t0,{message:"error during getRouteVariantsFromLocal",level:"error"});case 21:return e.abrupt("return",null);case 22:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),lt=function(){var e=t(n().mark((function e(){var t,r,o,i,a,c,s,u,l,p,f,h,m,v,g;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe().get("".concat(at,"/products/routeins.js"));case 3:if((l=e.sent)&&null!=l&&null!==(t=l.data)&&void 0!==t&&t.variants){e.next=6;break}return e.abrupt("return",null);case 6:return p=null==l||null===(r=l.data)||void 0===r?void 0:r.variants,f=(new Date).getTime(),h=JSON.stringify({variants:p,timestamp:f}),m=oe()?null===(o=window)||void 0===o||null===(i=o.Shopify)||void 0===i||null===(a=i.Checkout)||void 0===a?void 0:a.currency:null===(c=window)||void 0===c||null===(s=c.Shopify)||void 0===s||null===(u=s.currency)||void 0===u?void 0:u.active,de.storageActionItem((function(){return localStorage}),"setItem",st,m),de.storageActionItem((function(){return localStorage}),"setItem",ct,h),e.abrupt("return",p);case 15:e.prev=15,e.t0=e.catch(0),console.error("error when getting route variants from remote: ",e.t0),(null===e.t0||void 0===e.t0||null===(v=e.t0.response)||void 0===v?void 0:v.status)>=401&&(null===e.t0||void 0===e.t0||null===(g=e.t0.response)||void 0===g?void 0:g.status)<500||d.captureExceptionWithBreadcrumb(e.t0,{message:"error during getRouteVariantsFromRemote",level:"error"});case 19:return e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),pt=function(){var e=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut();case 2:if(e.t1=e.sent,e.t1){e.next=7;break}return e.next=6,lt();case 6:e.t1=e.sent;case 7:if(e.t0=e.t1,e.t0){e.next=10;break}e.t0=null;case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function dt(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ft(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ft(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(r),!0).forEach((function(t){te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vt=document.location.origin,gt=function(e){Q(c,e);var r,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ee(o);if(i){var r=ee(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Z(this,e)});function c(){var e;J(this,c);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return te(z(e=a.call.apply(a,[this].concat(o))),"state",{errored:!1,storeName:"",storeDomain:"",merchantId:"",currency:"USD",updatedVariantId:"",quoteAmount:"0.98",subtotalAmount:0,routeInCart:!1,routeIsChecked:!!e.props.defaultChecked,retryShippingMethods:5,fixingCart:!1,loadingSpinnerActive:!1,cartFixEvent:[]}),te(z(e),"isRouteVariantUpdate",function(){var e=t(n().mark((function e(t){var r,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=JSON.parse(t),e.next=4,pt();case 4:return o=e.sent,e.abrupt("return",o.some((function(e){return 1==r.updates[e.id]||0==r.updates[e.id]})));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),te(z(e),"onToggle",function(){var r=t(n().mark((function t(r){var o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(de.storageActionItem((function(){return sessionStorage}),"removeItem","route-added-once"),Je(r),Qe(z(e)),e.props.headlessWidget&&(o=!!r,de.storageActionItem((function(){return sessionStorage}),"setItem","routeChecked",o)),!r){t.next=10;break}return de.storageActionItem((function(){return sessionStorage}),"setItem","addingToCart",!0),t.next=8,e.setEnvironment();case 8:t.next=20;break;case 10:return t.next=12,e.removeAllRouteItemsFromCart();case 12:if(!e.props.reloadWithoutRefresh){t.next=17;break}return t.next=15,e.updateCartWithoutRefresh(e.props.reloadWithoutRefresh);case 15:t.next=20;break;case 17:if(!e.props.reloadWithoutRefreshV2){t.next=20;break}return t.next=20,et(e.props.reloadWithoutRefreshCartPage,e.props.reloadWithoutRefreshV2);case 20:ne("route:toggle",{toggled:r});case 21:case"end":return t.stop()}}),t)})));return function(e){return r.apply(this,arguments)}}()),te(z(e),"onGetQuote",function(){var r=t(n().mark((function t(r){var o,i,a,c,s,u;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return de.storageActionItem((function(){return sessionStorage}),"setItem","route-default-status",r.paymentResponsible.toggleState),t.next=3,pt();case 3:return o=t.sent,t.next=6,e.getRouteVariantNew(r.premium.amount,o);case 6:if(i=t.sent,a=i.price/100,ue.updateQuoteWithVariant(a),!e.state.fixingCart){t.next=15;break}return e.setState({fixingCart:!1}),t.next=13,e.fixCart(i);case 13:return e.props.fixingCheckoutCart&&(e.props.checkoutCartFixed=!0,e.props.slideoutCheckerForceRedirect?window.location.href=e.props.slideoutCheckerForceRedirect:(c=e.state.cartFixEvent).submitter?c.submitter.click():c.target.click()),t.abrupt("return");case 15:if(de.storageActionItem((function(){return sessionStorage}),"setItem","payment-responsible",r.paymentResponsible.type),"customer"!==r.paymentResponsible.type){t.next=26;break}if(!(null===(s=Xe(e.props.forceOptIn,e.props.forceOptOut,e.props.defaultChecked))&&"checked"===r.paymentResponsible.toggleState||s)){t.next=22;break}e.updateCart(i),t.next=24;break;case 22:return t.next=24,e.removeAllRouteItemsFromCart();case 24:t.next=40;break;case 26:return t.next=28,e.removeAllRouteItemsFromCart();case 28:if(u=t.sent,!e.props.reloadWithoutRefresh){t.next=34;break}return t.next=32,e.updateCartWithoutRefresh(e.props.reloadWithoutRefresh);case 32:t.next=40;break;case 34:if(!e.props.reloadWithoutRefreshV2){t.next=39;break}return t.next=37,et(e.props.reloadWithoutRefreshCartPage,e.props.reloadWithoutRefreshV2);case 37:t.next=40;break;case 39:"merchant"===r.paymentResponsible.type&&e.props.hideRouteProductFromCart&&!window.location.href.includes("/cart")&&e.hideRouteFromCart(e.props.hideRouteProductFromCart,u,r.premium.currency);case 40:case"end":return t.stop()}}),t)})));return function(e){return r.apply(this,arguments)}}()),te(z(e),"onCreateQuote",function(){var r=t(n().mark((function t(r){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.headlessWidget){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,ze(r,e.props);case 4:case"end":return t.stop()}}),t)})));return function(e){return r.apply(this,arguments)}}()),te(z(e),"updateCart",function(){var r=t(n().mark((function t(r){var o,i,a,c;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=[],t.next=4,e.getShopifyCart();case 4:if(0!==(i=t.sent).data.items.length||!de.storageActionItem((function(){return sessionStorage}),"getItem","addToCartTrigger")){t.next=15;break}case 6:if(0!==i.data.items.length){t.next=12;break}return t.next=9,e.getShopifyCart();case 9:i=t.sent,t.next=6;break;case 12:de.storageActionItem((function(){return sessionStorage}),"setItem","addToCartTrigger",!1),t.next=16;break;case 15:de.storageActionItem((function(){return sessionStorage}),"getItem","addToCartTrigger")&&de.storageActionItem((function(){return sessionStorage}),"setItem","addToCartTrigger",!1);case 16:if(a=i.data,c=[],a.items.forEach((function(e,t){"Route"===e.vendor?(e.indexInCart=t,o.push(e)):c.push(e)})),0!==c.length||!1!==e.props.ignoreSubtotal){t.next=22;break}return e.removeAllRouteItemsFromCart(),t.abrupt("return");case 22:return e.props.permalinkButtonSelector&&e.permalinkButtonsCheck(r.id,c),e.setState({currency:a.currency,updatedVariantId:r.id,quoteAmount:r.price/100}),t.next=26,e.handleOrder(!0,a,o,r);case 26:t.next=31;break;case 28:t.prev=28,t.t0=t.catch(0),console.error("error updating route variant in cart: ",t.t0);case 31:case"end":return t.stop()}}),t,null,[[0,28]])})));return function(e){return r.apply(this,arguments)}}()),te(z(e),"fixCart",function(){var r=t(n().mark((function t(r){var o,i,a,c,s,u,l,p,d;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getShopifyCart();case 2:for(o=t.sent,i=o.data,a=i.items,c=!1,s=[],u=0;u<a.length;u++)"Route"===a[u].vendor&&(l=a[u],s.push(l.id),s.length>1&&(c=!0),l.quantity>1&&(c=!0),l.id!==r.id&&(c=!0));if(!c){t.next=17;break}for(p={updates:te({},r.id,1)},d=0;d<s.length;d++)s[d]!==r.id&&(p.updates[s[d]]=0);return e.props.cartStatus="verified",t.next=14,e.postUpdateCart(p);case 14:e.props.cartStatus="unverified",t.next=18;break;case 17:$e(z(e));case 18:case"end":return t.stop()}}),t)})));return function(e){return r.apply(this,arguments)}}()),te(z(e),"getRouteVariantNew",(function(e,t){var r;if(e<=Number(t[0].price/100))r=t[0];else if(e>=Number(t[t.length-1].price/100))r=t[t.length-1];else for(var n=Number(t[0].price/100),o=0;e>n;)o+=1,r=t[parseInt(o)],n=Number(t[parseInt(o)].price/100);return r})),te(z(e),"setEnvironment",t(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props.nameToListen,e.props.forceCheckbox&&e.addListener(),r&&e.listenForName(r),e.getCart(),e.watchForChanges();case 5:case"end":return t.stop()}}),t)})))),te(z(e),"CustomEvent",(function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r})),te(z(e),"setGlobalVariables",t(n().mark((function r(){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:window.RouteWidget={check:function(){var t=e.state.routeIsChecked;t||window.RouteWidget.toggle(!t)},uncheck:function(){var t=e.state.routeIsChecked;!0===t&&window.RouteWidget.toggle(!!t)},toggle:function(t){e.setState({routeIsChecked:t})},reload:function(){e.setEnvironment()},getQuoteAmount:function(){return parseFloat(e.state.quoteAmount)},hasRouteInCart:function(){var e=t(n().mark((function e(){var t,r,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=(new Date).getTime(),e.next=4,pe().get("".concat(vt,"/cart.js?timestamp=").concat(t));case 4:return r=e.sent,o=r.data,e.abrupt("return",o.items&&o.items.some((function(e){return"route"===e.vendor.toLowerCase()&&e.price>0})));case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),routeIsChecked:function(){return e.state.routeIsChecked}};case 1:case"end":return r.stop()}}),r)})))),te(z(e),"addListener",(function(){for(var t,r,n,o=function(){var t=document.getElementsByClassName("route-div")[0];t.querySelector("[data-toggle]")&&"true"===document.querySelector(".route-div [data-toggle]").dataset.toggle&&(e.setState({routeIsChecked:!1}),t.querySelector("[data-toggle]").click())},i=document.getElementsByClassName("line-item med_u-container med_u-block med_u-row d-table-row"),a=0;a<i.length;a++)i[a].innerText.includes("Route Shipping")&&(n=a,r=document.getElementsByClassName(i[a].children[2].children[0].children[2].children[0].className),t=document.getElementsByClassName(i[a].lastElementChild.className),r[parseInt(n)].addEventListener("click",o),t[parseInt(n)].addEventListener("click",o))})),te(z(e),"listenForName",(function(t){var r,n,o=function t(){if("className"===n)for(var o=0;o<r.length;o++)r[o].removeEventListener("click",t);else r.removeEventListener("click",t);de.storageActionItem((function(){return sessionStorage}),"setItem","addToCartTrigger",!0),e.setEnvironment()};if(r=document.getElementsByClassName(t)){n="className";for(var i=0;i<r.length;i++)r[i].addEventListener("click",o)}else n="id",(r=document.getElementById(t)).addEventListener("click",o)})),te(z(e),"getShopifyCart",t(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,De.getShopifyCart(e.props);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))),te(z(e),"reloadWidget",t(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.prev=1,t.next=4,pt();case 4:r=t.sent,t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",console.error("ERROR getting Route Variants: ",t.t0));case 10:return t.next=12,e.getCart(r,!1);case 12:case"end":return t.stop()}}),t,null,[[1,7]])})))),te(z(e),"createQuote",(function(t){var r=e.props.headlessWidget?Shopify.Checkout?Shopify.Checkout.token:"":t.token,n=Ie(t.items,e.props.headlessWidget,e.props.itemToExclude),o=De.getCartSubtotal(t,e.props.itemToExclude)/100,i=t.currency&&Be.c.includes(t.currency.toUpperCase())?t.currency.toUpperCase():"";ue.createQuote(r,n,o,i)})),te(z(e),"getCart",t(n().mark((function t(){var r,o,i,a,c,s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getShopifyCart();case 3:if(0!==(r=t.sent).data.items.length||!de.storageActionItem((function(){return sessionStorage}),"getItem","addToCartTrigger")){t.next=14;break}case 5:if(0!==r.data.items.length){t.next=11;break}return t.next=8,e.getShopifyCart();case 8:r=t.sent,t.next=5;break;case 11:de.storageActionItem((function(){return sessionStorage}),"setItem","addToCartTrigger",!1),t.next=15;break;case 14:de.storageActionItem((function(){return sessionStorage}),"getItem","addToCartTrigger")&&de.storageActionItem((function(){return sessionStorage}),"setItem","addToCartTrigger",!1);case 15:if(o=r.data,i=Xe(e.props.forceOptIn,e.props.forceOptOut,e.props.defaultChecked),i=Ye(o,i),0!=(a=De.getCartSubtotal(o,e.props.itemToExclude)/100)){t.next=23;break}return t.next=22,e.removeAllRouteItemsFromCart();case 22:return t.abrupt("return");case 23:c=o.currency&&Be.c.includes(o.currency.toUpperCase())?o.currency.toUpperCase():"",s=o.token?o.token:window.Shopify&&window.Shopify.Checkout?window.Shopify.Checkout:"",ue.config(a,c,i,s),e.createQuote(o),t.next=32;break;case 29:t.prev=29,t.t0=t.catch(0),console.error("error updating route variant in cart: ",t.t0);case 32:case"end":return t.stop()}}),t,null,[[0,29]])})))),te(z(e),"handleOrder",function(){var r=t(n().mark((function t(r,o,i,a){var c,s,u,l,p;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=e.getSubscriptionProducts(o,!1),s=e.getSubscriptionProducts(o,!0),u=r&&o.items.length>0||e.shouldUpdateRegularOrder(i,c,s,a)||!1!==e.props.ignoreSubtotal,l=de.storageActionItem((function(){return sessionStorage}),"getItem","numberOfRoutesTurnedOn")?parseInt(de.storageActionItem((function(){return sessionStorage}),"getItem","numberOfRoutesTurnedOn"),10):0,p=document.getElementsByClassName("route-div"),e.props.multipleWidgets&&!e.state.routeIsChecked&&e.props.forceOptOut&&l<p.length&&(u||e.setState({routeIsChecked:!0}),de.storageActionItem((function(){return sessionStorage}),"setItem","numberOfRoutesTurnedOn",l+1)),!u){t.next=10;break}return de.storageActionItem((function(){return sessionStorage}),"removeItem","addOnReload"),t.next=10,e.handleRegularOrder(i,a,o);case 10:case"end":return t.stop()}}),t)})));return function(e,t,n,o){return r.apply(this,arguments)}}()),te(z(e),"shouldUpdateRegularOrder",(function(e,t,r,n){return e.length>1||e.length>0&&0===t.length&&r.length>0||1===e.length&&e[0].id!==n.id||1===e.length&&1!==e[0].quantity})),te(z(e),"getSubscriptionProducts",(function(e,t){for(var r=[],n=0;n<e.items.length;n++)e.items[n].properties&&(t?"Route"===e.items[n].vendor:"Route"!==e.items[n].vendor)&&e.items[n].properties.hasOwnProperty("shipping_interval_frequency")&&r.push(e.items[n]);return r})),te(z(e),"handleRegularOrder",function(){var r=t(n().mark((function t(r,o,i){var a,c;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.length>1||1===r.length&&(e.isSubscriptionProduct(r[0])||r[0].id!==o.id)||1===r.length&&1!==r[0].quantity)){t.next=7;break}return de.storageActionItem((function(){return sessionStorage}),"setItem","addingToCart",!0),t.next=5,e.updateRouteVariantInCart(r,o.id);case 5:t.next=16;break;case 7:if(0!==r.length||e.routeHasBeenRemovedManually()){t.next=15;break}return de.storageActionItem((function(){return sessionStorage}),"setItem","addingToCart",!0),t.next=11,e.addToCart(o.id,!0,!0,i);case 11:de.storageActionItem((function(){return sessionStorage}),"setItem","route-added-once",!0),oe()&&(null===(a=window.Shopify)||void 0===a||null===(c=a.Checkout)||void 0===c?void 0:c.token)&&de.storageActionItem((function(){return sessionStorage}),"setItem","route-current-checkout",window.Shopify.Checkout.token),t.next=16;break;case 15:0===r.length&&e.routeHasBeenRemovedManually()?(e.onToggle(!1),e.reloadWidget(),$e(z(e))):e.props.reorderRefresh?location.reload():$e(z(e));case 16:case"end":return t.stop()}}),t)})));return function(e,t,n){return r.apply(this,arguments)}}()),te(z(e),"routeHasBeenRemovedManually",(function(){var e,t,r=de.storageActionItem((function(){return sessionStorage}),"getItem","route-added-once"),n=de.storageActionItem((function(){return sessionStorage}),"getItem","route-current-checkout");return!!(oe()&&r&&n&&null!==(e=window.Shopify)&&void 0!==e&&null!==(t=e.Checkout)&&void 0!==t&&t.token)&&r&&!(n!==window.Shopify.Checkout.token)})),te(z(e),"isSubscriptionProduct",(function(e){return e.properties&&e.properties.hasOwnProperty("shipping_interval_frequency")})),te(z(e),"addToCart",function(){var r=t(n().mark((function t(r,o){var i,a,c,s=arguments;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return!(s.length>2&&void 0!==s[2])||s[2],i=s.length>3?s[3]:void 0,xe()&&!Re(i.items)?(a=i.items).push({variant_id:r,quantity:1}):a={updates:te({},r,1)},t.prev=3,e.setState({routeIsChecked:!0}),c=!0,(e.props.disableReorder||e.props.nameToListen||e.props.headlessWidget)&&(c=!1),t.next=9,e.postUpdateCart(a,r,c,i);case 9:t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(3),$e(z(e)),t.abrupt("return",console.error("ERROR adding to cart: ",t.t0));case 15:e.props.nameToListen&&de.storageActionItem((function(){return sessionStorage}),"setItem","routeAdded",!0),"/cart"===window.location.pathname&&o&&e.props.refreshClickAdd&&location.reload(),oe()&&!e.props.headlessWidget&&e.refreshCheckout(document.location,!0);case 18:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,t){return r.apply(this,arguments)}}()),te(z(e),"removeAllRouteItemsFromCart",function(){var r=t(n().mark((function t(r){var o,i,a,c,s,u,l;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getShopifyCart();case 2:for(o=t.sent,i=o.data.items,a=!1,c=0,s={updates:{}},u=0;u<i.length;u++)"Route"===i[u].vendor&&(s.updates[i[u].variant_id]=0,c+=i[u].price,a=!0);if(!a){t.next=26;break}if(t.prev=9,!xe()||Re(i)){t.next=16;break}return l=i.filter((function(e){if("Route"!==e.vendor)return e})),t.next=14,e.postUpdateCart(l);case 14:t.next=18;break;case 16:return t.next=18,e.postUpdateCart(s);case 18:return t.next=20,e.onChangeRouteProductVisibility(!1,void 0,r);case 20:t.next=26;break;case 22:return t.prev=22,t.t0=t.catch(9),$e(z(e)),t.abrupt("return",console.error("ERROR removing all Route items from cart: ",t.t0));case 26:return t.abrupt("return",c/100);case 27:case"end":return t.stop()}}),t,null,[[9,22]])})));return function(e){return r.apply(this,arguments)}}()),te(z(e),"onChangeRouteProductVisibility",function(){var r=t(n().mark((function t(r,o,i){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i||e.setState({routeIsChecked:r}),o&&e.props.needsUpdate&&e.props.classNameRemove&&"/cart"!==window.location.pathname&&document.getElementsByClassName(e.props.classNameRemove)[o[0].indexInCart].click(),"/cart"!==window.location.pathname||e.props.reloadWithoutRefresh?e.props.reloadWithoutRefresh?e.updateCartWithoutRefresh(e.props.reloadWithoutRefresh):e.props.reloadWithoutRefreshV2&&et(e.props.reloadWithoutRefreshCartPage,e.props.reloadWithoutRefreshV2):location.reload(),!oe()||e.props.headlessWidget){t.next=6;break}return t.next=6,e.refreshCheckout(document.location,!0);case 6:case"end":return t.stop()}}),t)})));return function(e,t,n){return r.apply(this,arguments)}}()),te(z(e),"updateCartWithoutRefresh",function(){var r=t(n().mark((function t(r){var o,i,a,c,s,u,l,p,d,f,h,m,v,g,y,b,w,_;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a="",r.includes(",")?(s=r.split(","),u=He(s,4),o=u[0],i=u[1],a=u[2],c=u[3],i=i||"",a=a||""):o=r,l=c||"".concat(vt,"/cart").concat(a),t.next=6,pe().get(l);case 6:p=t.sent,d=p.data,(f=document.createElement("div")).innerHTML=d,m=(h=function(e,t){return e.getElementsByClassName(t)[0]})(f,o),(v=e.props.reloadWithoutRefreshCartPage||o).includes(",")&&(y=v.split(","),b=He(y,2),v=b[0],g=b[1]),"/cart"===window.location.pathname?(m=h(f,v),h(document,v).innerHTML=m.innerHTML,g&&(w=h(f,g),h(document,g).innerHTML=w.innerHTML)):(h(document,o).innerHTML=m.innerHTML,i&&(_=h(f,i),h(document,i).innerHTML=_.innerHTML)),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return r.apply(this,arguments)}}()),te(z(e),"hideRouteFromCart",function(){var e=t(n().mark((function e(t,r,o){var i,a,c,s,u,l,p,d,f;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.split(",").map((function(e){return e.trim()})),a=He(i,2),c=a[0],s=a[1],c&&s&&0!==r){e.next=3;break}return e.abrupt("return");case 3:if(u=/\d{1,3}(?:[.,]\d{3})*(?:[.,]\d{2})?/g,l=/[\d(\,|\.)]+[\,|\.]\d{2}$/g,p=document.getElementsByClassName(c),0!==(d=Array.from(p).filter((function(e){return e.innerText.includes("Route Package Protection")}))).length){e.next=9;break}return e.abrupt("return");case 9:d.forEach((function(e){return e.style.display="none"})),f=document.getElementsByClassName(s),Array.from(f).forEach((function(e){var t=e.innerText.match(u);if(t){var n=parseFloat(t[0].replace(/[.,]/g,""))/100-r,i=t[0].match(l),a=(0,Be.T)(n%1!=0||i,navigator.language,n,o);a=a.match(u)[0],e.innerText=e.innerText.replace(t[0],a)}}));case 12:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),te(z(e),"postUpdateCart",function(){var r=t(n().mark((function t(r,o,i,a){var c,s,u,l,p,d;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=10;break}for(c=a.items,s={items:[{id:o,quantity:1}]},u=c.length-1;u>=0;u--)"Route"!==c[u].vendor&&(l={id:c[u].id,quantity:c[u].quantity,properties:c[u].properties},c[u].selling_plan_allocation&&c[u].selling_plan_allocation.selling_plan&&c[u].selling_plan_allocation.selling_plan.id&&(l.selling_plan=c[u].selling_plan_allocation.selling_plan.id),s.items.push(l));return t.next=7,e.reorderCartwithRetry(s,e.props.reloadWithoutRefresh,e.props.reloadWithoutRefreshV2,e.props.reloadWithoutRefreshCartPage,3);case 7:return p=t.sent,ne("route:cart_updated"),t.abrupt("return",p);case 10:if(!e.props.headlessWidget){t.next=15;break}Qe(z(e)),De.updateShopifyCartHeadless(r,e.props).then((function(){ne("route:cart_updated"),e.refreshCheckout(document.location,!0)})).catch((function(){$e(z(e))})),t.next=20;break;case 15:return t.next=17,De.updateShopifyCart(r,e.props);case 17:return d=t.sent,ne("route:cart_updated"),t.abrupt("return",d);case 20:case"end":return t.stop()}}),t)})));return function(e,t,n,o){return r.apply(this,arguments)}}()),te(z(e),"reorderCartwithRetry",(function(t,r,n,o,i){if(i>0)return e.reorderCart(t,r,n,o).then((function(e){return Promise.resolve(e)})).catch((function(){return e.reorderCartwithRetry(t,r,n,o,--i)}));location.reload()})),te(z(e),"reorderCart",function(){var r=t(n().mark((function r(o,i,a,c){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,s){pe().post("".concat(vt,"/cart/clear.js")).then((function(){return pe().post("".concat(vt,"/cart/add.js"),o)})).then(function(){var o=t(n().mark((function t(o){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=5;break}return t.next=3,e.updateCartWithoutRefresh(i);case 3:t.next=8;break;case 5:if(!a){t.next=8;break}return t.next=8,et(c,a);case 8:r(o);case 9:case"end":return t.stop()}}),t)})));return function(e){return o.apply(this,arguments)}}()).catch((function(e){console.log("Error reordering cart: ",e),s(e)}))})));case 1:case"end":return r.stop()}}),r)})));return function(e,t,n,o){return r.apply(this,arguments)}}()),te(z(e),"removeFromCart",function(){var r=t(n().mark((function t(r){var o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={updates:te({},r,0)},t.prev=1,t.next=4,e.postUpdateCart(o);case 4:return t.next=6,e.onChangeRouteProductVisibility(!1);case 6:t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",console.error("ERROR removing from cart: ",t.t0));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()),te(z(e),"updateRouteVariantInCart",function(){var r=t(n().mark((function t(r,o){var i,a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={},a=!1,r.forEach((function(e){return e.id===o?(i.updates=mt(mt({},i.updates),{},te({},e.id,1)),a=!0):i.updates=mt(mt({},i.updates),{},te({},e.id,0))})),a?de.storageActionItem((function(){return sessionStorage}),"setItem","addingToCart",!1):i.updates=mt(mt({},i.updates),{},te({},o,1)),t.prev=4,t.next=7,e.postUpdateCart(i);case 7:return t.next=9,e.onChangeRouteProductVisibility(!0,r);case 9:t.next=14;break;case 11:return t.prev=11,t.t0=t.catch(4),t.abrupt("return",console.error("ERROR updating route variant in cart: ",t.t0));case 14:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e,t){return r.apply(this,arguments)}}()),te(z(e),"refreshCheckout",function(){var r=t(n().mark((function t(r,o){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(oe()){t.next=2;break}return t.abrupt("return");case 2:r=r&&r.href?r.href:r,pe().get(r).then((function(t){var r=document.createElement("div");r.innerHTML=t.data,o&&e.renderOrderSummary(r),e.updateShippingMethods(r),e.ensureRouteIsChecked(),ne("route:checkout_reloaded")})).catch((function(t){$e(z(e)),e.retryRefreshCheckout(r,o),console.error("retry refresh checkout",t)}));case 4:case"end":return t.stop()}}),t)})));return function(e,t){return r.apply(this,arguments)}}()),te(z(e),"ensureRouteIsChecked",(function(){var t=setInterval((function(){var r=document.getElementsByClassName("product-table");if(r){var n=!(!r||!r[0].innerText.length)&&r[0].innerText.toLowerCase().includes("route shipping insurance"),o=e.state.routeIsChecked;if(n||o||clearInterval(t),n&&o){var i=document.getElementsByClassName("route-div")[0];if(i){var a=i.querySelector("[data-toggle]");a&&"false"===document.querySelector(".route-div [data-toggle]").dataset.toggle&&n&&(e.setState({routeIsChecked:!0}),i.querySelector("[data-toggle]").click(),clearInterval(t)),a&&"true"===document.querySelector(".route-div [data-toggle]").dataset.toggle&&n&&clearInterval(t)}}}}),1500)})),te(z(e),"renderOrderSummary",(function(t){$e(z(e)),e.props.reloadProductsAndPriceSeparatelyCheckout?(document.querySelector(".order-summary__section--product-list").innerHTML=t.querySelector(".order-summary__section--product-list").innerHTML,document.querySelector(".order-summary__section--total-lines").innerHTML=t.querySelector(".order-summary__section--total-lines").innerHTML):document.querySelector("#order-summary").innerHTML=t.querySelector("#order-summary").innerHTML})),te(z(e),"renderShippingMethods",(function(e){document.querySelector(".section.section--shipping-method").innerHTML=e.querySelector(".section.section--shipping-method").innerHTML})),te(z(e),"updateShippingMethods",(function(t){if(null!==document.querySelector(".section.section--shipping-method"))if(null!==t.querySelector("div.section--shipping-method > .section__content > fieldset.content-box > *")){var r=document.querySelector('[name="checkout[shipping_rate][id]"]:checked').id;e.renderShippingMethods(t),e.removeShippingMethodsCSSTransition(),e.shippingMethodDoubleClick(r),e.setState({retryShippingMethods:10})}else{var n=t.querySelector("div.section--shipping-method [data-shipping-methods]");if(null!==n){var o=n.getAttribute("data-poll-target");o&&e.retryRefreshCheckout(vt+o,!1)}}})),te(z(e),"shippingMethodDoubleClick",(function(e){if(e){var t=document.querySelector("#".concat(e)),r=document.querySelectorAll('[name="checkout[shipping_rate][id]"]');(r[0]===t?r[r.length-1]:r[0]).click(),t.click()}})),te(z(e),"watchForChanges",(function(){var t,r,n=e.props.elementToListen,o=document.querySelectorAll(n),i={attributes:!0,childList:!0,subtree:!0},a=new MutationObserver((function(n){var o,i=dt(n);try{for(i.s();!(o=i.n()).done;){var a=o.value;de.storageActionItem((function(){return sessionStorage}),"setItem","mutatationTargetOuterText",a.target.outerText),t=de.storageActionItem((function(){return sessionStorage}),"getItem","mutatationTargetOuterText"),"childList"===a.type&&t!==r&&(r=de.storageActionItem((function(){return sessionStorage}),"getItem","mutatationTargetOuterText"),e.reloadWidget())}}catch(e){i.e(e)}finally{i.f()}}));if(o.length>0){var c,s=dt(o);try{for(s.s();!(c=s.n()).done;){var u=c.value;a.observe(u,i)}}catch(e){s.e(e)}finally{s.f()}}})),te(z(e),"adjustmentsForSlideOutCart",(function(){"/cart"!==window.location.pathname&&!oe()&&e.props.slideoutChecker&&e.attachSlideoutCartChecker()})),te(z(e),"attachSlideoutCartChecker",(function(){var r=z(e),o=window.$;if(void 0!==o&&"function"==typeof o){var i=o(document).ajaxSuccess;void 0!==i&&"function"==typeof i&&o(document).ajaxSuccess(function(){var e=t(n().mark((function e(t,o,i){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.url.match(/cart.(change)/g)&&!i.url.match(/cart.(update)/g)){e.next=3;break}return e.next=3,r.initiateFixCartSafe();case 3:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}())}for(var a=document.evaluate(".//input | .//button | .//a",document.body,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),c=0;c<a.snapshotLength;c++){var s=a.snapshotItem(c);if(void 0!==s.value&&s.value.match(/check\s*out/gim)||void 0!==s.innerHTML&&s.innerHTML.match(/checkout/gim)||void 0!==s.name&&s.name.match(/check\s*out/gim)){var u=void 0;Element.prototype.closest&&(u=s.closest("form")),u?u.onsubmit=e.formCheckCartForAbnormalities:s.onclick=e.buttonCheckCartForAbnormalities}}})),te(z(e),"permalinkButtonsCheck",(function(t,r){var n=Ae(t,r);document.querySelectorAll(e.props.permalinkButtonSelector).forEach((function(e){var t=e.href.replace(/\/cart\/.*$/gi,"/cart/")+n;e.href=t}))})),te(z(e),"formCheckCartForAbnormalities",function(){var r=t(n().mark((function r(o){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.props.checkoutCartFixed||o.preventDefault(),e.props.fixingCheckoutCart||(e.props.fixingCheckoutCart=!0,e.setState({cartFixEvent:o},t(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initiateFixCart();case 2:e.props.slideoutCheckerForceRedirect&&(window.location.href=e.props.slideoutCheckerForceRedirect);case 3:case"end":return t.stop()}}),t)})))));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()),te(z(e),"buttonCheckCartForAbnormalities",function(){var r=t(n().mark((function t(r){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==e.props.fixingCheckoutCart){t.next=8;break}return r.preventDefault(),r.stopImmediatePropagation(),t.next=5,e.initiateFixCart();case 5:return e.props.fixingCheckoutCart=!0,t.next=8,r.target.click();case 8:case"end":return t.stop()}}),t)})));return function(e){return r.apply(this,arguments)}}()),te(z(e),"initiateFixCart",t(n().mark((function r(){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.setState({fixingCart:!0},t(n().mark((function t(){var r,o,i,a,c;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getShopifyCart();case 2:if(r=t.sent,o=r.data,0!=(i=De.getCartSubtotal(o,e.props.itemToExclude)/100)){t.next=10;break}return e.setState({fixingCart:!1}),t.next=9,e.removeAllRouteItemsFromCart();case 9:return t.abrupt("return");case 10:if(a=o.currency&&Be.c.includes(o.currency.toUpperCase())?o.currency.toUpperCase():"",c=Xe(e.props.forceOptIn,e.props.forceOptOut,e.props.defaultChecked),!(c=Ye(o,c))&&null!==c){t.next=18;break}ue.config(i,a,c),e.createQuote(o),t.next=21;break;case 18:return e.setState({fixingCart:!1}),t.next=21,e.removeAllRouteItemsFromCart();case 21:case"end":return t.stop()}}),t)}))));case 1:case"end":return r.stop()}}),r)})))),te(z(e),"initiateFixCartSafe",t(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.slideoutChecker||"unverified"!==e.props.cartStatus){t.next=3;break}return t.next=3,e.initiateFixCart();case 3:case"end":return t.stop()}}),t)})))),e}return K(c,[{key:"componentDidMount",value:(r=t(n().mark((function e(){var r,o,i,a=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(" * * * Widget Did Mounting * * * "),e.prev=1,r=ve(),e.next=5,_e(r);case 5:return o=e.sent,this.setState({merchantId:o.merchantId,storeName:o.storeName,storeDomain:r}),e.next=9,ue.init(this.onToggle,this.onGetQuote,this.onCreateQuote,r,"production",o.merchantId,o.storeName,this.props.darkUI,this.props.desktopAlign);case 9:if(this.props.headlessWidget){e.next=12;break}return e.next=12,Ze(this.props);case 12:return e.next=14,this.setEnvironment();case 14:this.setGlobalVariables(),i=this,qe.on("http-cart-change",t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("cart CHANGE on Widget"),e.next=3,i.reloadWidget();case 3:return e.next=5,i.initiateFixCartSafe();case 5:case"end":return e.stop()}}),e)})))),qe.on("http-cart-update",function(){var e=t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u("cart UPDATED on Widget"),e.t0=t,!e.t0){e.next=6;break}return e.next=5,a.isRouteVariantUpdate(t);case 5:e.t0=!e.sent;case 6:if(!e.t0){e.next=9;break}return e.next=9,i.reloadWidget();case 9:return e.next=11,i.initiateFixCartSafe();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),qe.on("http-cart-add",function(){var e=t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u("cart ADD on Widget"),e.t0=t,!e.t0){e.next=6;break}return e.next=5,a.isRouteVariantUpdate(t);case 5:e.t0=!e.sent;case 6:if(!e.t0){e.next=9;break}return e.next=9,i.reloadWidget();case 9:return e.next=11,i.initiateFixCartSafe();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.adjustmentsForSlideOutCart(),qe.intercept(),this.props.disableAnalytics&&(window.Routeapp.analytics.settings.disableGA=!0),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(1),d.captureExceptionWithBreadcrumb(e.t0,{message:"error during componentDidMount Shopify Widget",level:"error"}),window.Routeapp.analytics.send({action:"error_mounting_shopify_widget",event_category:"route-widget",event_label:"widget",value:JSON.stringify(e.t0)});case 28:case"end":return e.stop()}}),e,this,[[1,24]])}))),function(){return r.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){console.log("Route Widget v1.2 - Unmounted")}},{key:"componentDidCatch",value:function(e){this.setState({errored:!0}),u(e),window.Routeapp.analytics.send({action:"error_render_shopify_widget",event_category:"route-widget",event_label:"widget",value:e})}},{key:"removeShippingMethodsCSSTransition",value:function(){document.querySelectorAll('[name="checkout[shipping_rate][id]"]').forEach((function(e){e.style.transition="none"}))}},{key:"retryRefreshCheckout",value:function(e,t){var r=this;this.state.retryShippingMethods>0?setTimeout((function(){r.setState({retryShippingMethods:r.state.retryShippingMethods-1}),r.refreshCheckout(e,t)}),500):$e(this)}},{key:"render",value:function(){return S("div",{className:"route-empty"})}}]),c}(E);te(gt,"propTypes",{darkUI:Ve().bool.isRequired,altUI:Ve().bool.isRequired,desktopAlign:Ve().string.isRequired,mobileAlign:Ve().string.isRequired,classNameRemove:Ve().string.isRequired,needsUpdate:Ve().bool.isRequired,defaultChecked:Ve().bool.isRequired,forceCheckbox:Ve().bool.isRequired,refreshClickAdd:Ve().bool.isRequired,reorderRefresh:Ve().bool.isRequired,disableReorder:Ve().bool.isRequired,interceptorsDelay:Ve().bool.isRequired,slideoutChecker:Ve().bool,slideoutCheckerForceRedirect:Ve().string,fixingCheckoutCart:Ve().bool,checkoutCartFixed:Ve().bool,cartStatus:Ve().string,reloadWithoutRefresh:Ve().string,reloadWithoutRefreshV2:Ve().string,reloadWithoutRefreshCartPage:Ve().string,nameToListen:Ve().string.isRequired,forceOptIn:Ve().bool,forceOptOut:Ve().bool,elementToListen:Ve().string,disableAnalytics:Ve().bool,defaultMaxUsdSubtotalAllowed:Ve().number,defaultMinUsdSubtotalAllowed:Ve().number,ignoreSubtotal:Ve().bool,multipleWidgets:Ve().bool,headlessWidget:Ve().bool,reloadProductsAndPriceSeparatelyCheckout:Ve().bool,hideRouteProductFromCart:Ve().string,itemToExclude:Ve().string}),te(gt,"defaultProps",{needsUpdate:!1,darkUI:!1,altUI:!1,defaultChecked:!1,refreshClickAdd:!1,reorderRefresh:!1,disableReorder:!1,forceCheckbox:!1,interceptorsDelay:!1,disableAnalytics:!1,defaultMaxUsdSubtotalAllowed:5e3,defaultMinUsdSubtotalAllowed:0,ignoreSubtotal:!1,cartStatus:"unverified",itemToExclude:""});var yt,bt,wt,_t=[{type:"watch-add",attributes:"nameToListen"},{type:"opt-in",attributes:"forceOptIn"},{type:"opt-out",attributes:"forceOptOut"},{type:"watch-changes",attributes:"elementToListen"},{type:"needs-update",attributes:"needsUpdate",isBool:!0},{type:"default-checked",attributes:"defaultChecked",isBool:!0},{type:"refreshClickAdd",attributes:"refreshClickAdd",isBool:!0},{type:"reorder-refresh",attributes:"reorderRefresh",isBool:!0},{type:"disable-reorder",attributes:"disableReorder",isBool:!0},{type:"interceptors-delay",attributes:"interceptorsDelay",isBool:!0},{type:"multiple-widgets",attributes:"multipleWidgets",isBool:!0},{type:"reload-without-refresh",attributes:"reloadWithoutRefresh"},{type:"reload-without-refresh-v2",attributes:"reloadWithoutRefreshV2"},{type:"reload-without-refresh-cart-page",attributes:"reloadWithoutRefreshCartPage"},{type:"slideout-checker",attributes:"slideoutChecker",isBool:!0},{type:"slideout-checker-force-redirect",attributes:"slideoutCheckerForceRedirect"},{type:"force-checkbox",attributes:"forceCheckbox",isBool:!0},{type:"disable-analytics",attributes:"disableAnalytics"},{type:"class-name-remove",attributes:"classNameRemove",isGetFromValue:!0},{type:"mobile-align",attributes:"mobileAlign"},{type:"desktop-align",attributes:"desktopAlign"},{type:"dark-ui",attributes:"darkUI",isBool:!0},{type:"ignore-subtotal",attributes:"ignoreSubtotal",isBool:!0},{type:"headless-widget",attributes:"headlessWidget",isBool:!0},{type:"reload-products-and-price-separately-checkout",attributes:"reloadProductsAndPriceSeparatelyCheckout",isBool:!0},{type:"hide-route-product-from-cart",attributes:"hideRouteProductFromCart"},{type:"permalink-button-check",attributes:"permalinkButtonSelector"},{type:"exclude-product",attributes:"itemToExclude"}],kt=function(e){var t={},r=function(t){return e.hasAttribute(t)||e.classList.contains(t)};return _t.map((function(n){var o,i;n.hasOwnProperty("isBool")?(o=n.type,i=n.attributes,r(o)&&(t[i]=!0)):n.hasOwnProperty("isGetFromValue")?function(n,o){r(n)&&(t[o]=function(t){return e.attributes[t].value}(n))}(n.type,n.attributes):function(n,o){r(n)&&(t[o]=function(t){return e.getAttribute(t)}(n))}(n.type,n.attributes)})),t},xt=function(){var e=t(n().mark((function e(){var t,r,o,i,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,void 0,n=(new Date).getTime(),pe().get("".concat(document.location.origin,"/cart.js?timestamp=").concat(n));case 2:if(t=e.sent,r=t.data.items,o=!1,i={updates:{}},r)for(a=0;a<r.length;a++)"Route"===r[a].vendor&&(i.updates[r[a].variant_id]=0,o=!0);o&&pe().post("".concat(document.location.origin,"/cart/update.js"),i).then((function(e){window.location.reload()})).catch((function(e){return console.log("Error removing Route",e)}));case 8:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}(),St=(o(400),ve());function Ct(){var e;document.getElementById("route-script")&&document.getElementById("route-script").hasAttribute("headless-widget")&&ae()&&De.updateOrderSummaryPaymentPage({headlessWidget:!0}),(e=t(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:oe()||ie()||(t=document.createElement("div"),V(S(Fe,null),t));case 1:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})();var r,o=!0;function i(e){var t=document.querySelector(".route-holder");if(!t){var r=document.createElement("div");r.setAttribute("class","route-holder"),e.parentNode.insertBefore(r,e),t=r}return t}function a(){qe.on("http-cart-update",(function(){o=!0})),qe.on("http-cart-change",(function(){o=!0})),qe.on("http-cart-add",(function(){o=!0})),qe.intercept()}window.renderRouteWidget=function(){var e=t(n().mark((function e(t){var r,a,c,s,u,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.length>0)){e.next=27;break}r=0;case 2:if(!(r<t.length)){e.next=27;break}if(a={},t[r]){e.next=6;break}return e.abrupt("continue",24);case 6:if(a=kt(t[r]),t[r].hasAttribute("route-storefront-token")&&de.storageActionItem((function(){return sessionStorage}),"setItem","route-storefront-token",t[r].getAttribute("route-storefront-token")),window.route_config&&(window.route_config.alternate_ui&&(a.altUI=!0),window.route_config.disableGA&&(a.disableAnalytics=!0),window.route_config.disableReorder&&(a.disableReorder=!0)),oe()&&(a.disableReorder=!0),oe()||ie()){e.next=21;break}return e.next=13,De.getShopifyCart(a);case 13:if(200!==(c=e.sent).status){e.next=21;break}if(s=c.data,u=s.items,0!==Ee(u,a.itemToExclude).length){e.next=21;break}return o=!1,xt(),e.abrupt("return");case 21:o=!0,l=i(t[r]),V(S(gt,a),l);case 24:r++,e.next=2;break;case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),window.route_config&&window.route_config.disableGA&&window.Routeapp.analytics&&(window.Routeapp.analytics.settings.disableGA=!0),(r=document.querySelector(".route-div"))&&r.hasAttribute("interceptors-delay")?setTimeout(a,100):a();var c=!0;function s(){var e,t=document.querySelectorAll(".section--shipping-method").length,r=document.querySelectorAll(".route-div").length,n=document.querySelectorAll("[data-protection-widget]").length,i="no_coverage"===de.storageActionItem((function(){return sessionStorage}),"getItem","payment-responsible");if(e=document.querySelector('[data-step="shipping_method"]'),oe()&&(e||window.location.href.includes("step=shipping_method"))&&t>0&&0===r){var a=document.createElement("div");a.className="section";var l=document.createElement("div"),d=document.getElementById("route-script");if(d)for(var h=0;h<d.attributes.length;h++){var m=d.attributes[h];"id"!==m.nodeName&&"type"!==m.nodeName&&l.setAttribute(m.nodeName,m.nodeValue?m.nodeValue:"")}l.className="route-div",a.appendChild(l),document.querySelectorAll(".step__sections")[0].appendChild(a)}u("Should render widget?",r>n,o,c,!i),r>n&&o&&c&&!i&&(window.renderRouteWidget(document.querySelectorAll(".route-div")),c=!1,setTimeout((function(){c=!0}),3e3),100===p&&(p=1e3,clearInterval(f),f=setInterval(s,p)))}!function(){var e=document.querySelector(".route-div");if(e&&e.hasAttribute("button-add")){var t=e.getAttribute("button-add");document.querySelectorAll(t).forEach((function(e){e.addEventListener("click",(function(){o=!0}))}))}}();var p=100,f=function(){try{return"no_coverage"===de.storageActionItem((function(){return sessionStorage}),"getItem","payment-responsible")&&de.storageActionItem((function(){return sessionStorage}),"removeItem","payment-responsible"),s(),setInterval(s,p)}catch(e){d.captureExceptionWithBreadcrumb(e,{message:"error during checkAndSetInterval",level:"error"})}}();ue.fetchProtectCoreScript("".concat(l.protectCoreURL,"?shop=").concat(St))}null===(yt=window)||void 0===yt||null===(bt=yt.Routeapp)||void 0===bt||null===(wt=bt.analytics)||void 0===wt||wt.send({action:"track_performance",event_category:"route-widget",event_label:"widget-adapter-init",value:Math.round(window.performance.now())}),function(){try{"loading"!==document.readyState?Ct():document.addEventListener("DOMContentLoaded",(function(){Ct()}))}catch(e){d.captureExceptionWithBreadcrumb(e,{message:"fetch Protect Core right at the start",level:"error"})}}();var Rt=ve();function Et(){return(Et=t(n().mark((function e(){var t,r,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(oe()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,De.getShopifyCart({ignoreCachedCart:!0});case 4:if(t=e.sent,1!==(r=t.data).items.length||"Route"!==r.items[0].vendor){e.next=12;break}return(o={updates:{}}).updates[r.items[0].key]=0,e.next=11,De.updateShopifyCart(o);case 11:location.reload();case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}pt(),_e(Rt),function(){Et.apply(this,arguments)}()})(),a})()}));
//# sourceMappingURL=route-widget-shopify-stable-v2.min.js.map